# è·¨å¢ƒç”µå•†æ•°æ®åˆ†æå¹³å°

## é¡¹ç›®æ¦‚è¿°
è·¨å¢ƒç”µå•†æ•°æ®åˆ†æå¹³å°ï¼Œæ”¯æŒå¤šå¹³å°ã€å¤šæ¸ é“çš„å¹¿å‘Šæ•°æ®åˆ†æï¼ŒåŒ…æ‹¬é€Ÿå–é€šã€äºšé©¬é€Šã€TikTok Shopã€Temuã€Ozonç­‰å¹³å°çš„æ•°æ®æ•´åˆä¸åˆ†æã€‚

## å…¨å±€æ¶æ„è§„åˆ’ï¼ˆ2025-01-07 æ›´æ–°ï¼‰
- ğŸ‘‰ è¯¦è§ã€Š[è·¨å¢ƒç”µå•†ç®¡ç†å¹³å°æ¶æ„è“å›¾](docs/platform-architecture.md)ã€‹ï¼Œè¦†ç›–ç«™ç‚¹çŸ©é˜µã€æ¨¡å—èŒè´£ã€æ•°æ®æµåŠæ‰©å±•è®¡åˆ’ã€‚ã€F:docs/platform-architecture.mdâ€ L1-L118ã€‘
- **ç«™ç‚¹çŸ©é˜µ**ï¼šä¿ç•™é€Ÿå–é€šè‡ªè¿è¥ï¼ˆRobot/Poolslabï¼‰ã€å…¨æ‰˜ç®¡ã€ç‹¬ç«‹ç«™ã€äºšé©¬é€Šã€Ozon ç­‰æ—¢æœ‰é¡µé¢ï¼Œå¹¶ä¸º Temuã€TikTokã€Lazadaã€Shopee é¢„ç•™å¯¼èˆªä¸æ•°æ®æ¥å…¥è·¯å¾„ï¼Œå½¢æˆç»Ÿä¸€å…¥å£ã€‚ã€F:docs/platform-architecture.mdâ€ L12-L52ã€‘
- **æ¨¡å—è“å›¾**ï¼šé™¤è¿è¥åˆ†æå¤–ï¼Œæ–°å¢è®¢å•ç®¡ç†ã€åº“å­˜ç®¡ç†ã€å¹¿å‘Šä¸­å¿ƒä¸æƒé™ä¸­å¿ƒå››å¤§ä¸šåŠ¡åŸŸï¼Œåˆ†åˆ«è´Ÿè´£è®¢å•é—­ç¯ã€åº“å­˜æ‰¹æ¬¡ä¸è°ƒæ‹¨ã€å¹¿å‘Šå½’å› ä»¥åŠè·¨å›¢é˜Ÿè®¿é—®æ§åˆ¶ã€‚ã€F:docs/platform-architecture.mdâ€ L54-L119ã€‘
- **æ•°æ®æµä¸æŒ‡æ ‡**ï¼šç»Ÿä¸€ä½¿ç”¨â€œæ›å…‰ â†’ è®¿å®¢ â†’ åŠ è´­ â†’ ä¸‹å• â†’ æ”¯ä»˜ â†’ æ”¯ä»˜é‡‘é¢â€é“¾è·¯ï¼Œå¹¶å°†æŒ‡æ ‡å®šä¹‰ã€OpenAPI è§„èŒƒä¸ SQL æ•°æ®æ¨¡å‹åˆ†åˆ«æ²‰æ·€åœ¨ `specs/metrics_dictionary.md`ã€`specs/openapi.yaml`ã€`specs/data-model.sql` ä¸­ï¼Œç¡®ä¿è·¨å¹³å°ä¸€è‡´æ€§ã€‚ã€F:docs/platform-architecture.mdâ€ L73-L118ã€‘ã€F:specs/metrics_dictionary.mdâ€ L1-L20ã€‘ã€F:specs/openapi.yamlâ€ L1-L369ã€‘ã€F:specs/data-model.sqlâ€ L1-L209ã€‘
- **å¤šå¹³å°æ‰©å±•**ï¼šé€šè¿‡ `site-configs` æ³¨å†Œæ–°ç«™ç‚¹ï¼ˆå¦‚ Lazada/Shopeeï¼‰ï¼Œå¹¶æ‰©å±• ingest/API å³å¯å¿«é€Ÿä¸Šçº¿ï¼Œç›¸å…³æ­¥éª¤åœ¨è“å›¾åŠè·¯çº¿å›¾ä¸­ç»™å‡ºã€‚ã€F:docs/platform-architecture.mdâ€ L31-L116ã€‘ã€F:roadmap.yamlâ€ L1-L49ã€‘
- **æ‰§è¡ŒæŒ‡å¼•**ï¼šä¼˜å…ˆå»ºè®¾æƒé™æ ¡éªŒã€å†å¹¶è¡Œæ¨è¿›è®¢å•ä¸åº“å­˜ç­‰æ¨¡å—ï¼Œå¹¶åœ¨ CI ä¸­å¼ºåˆ¶æ ¡éªŒè§„åˆ™ä¸è§„æ ¼åŒæ­¥ï¼Œé™ä½å¤šäººåä½œé£é™©ã€‚ã€F:docs/platform-architecture.mdâ€ L120-L162ã€‘ã€F:rules.jsonâ€ L1-L54ã€‘

## å¼€å‘å®æ–½æ­¥éª¤ä¸ä»»åŠ¡åˆ†é…ï¼ˆ2025-01-09 æ›´æ–°ï¼‰
- ğŸ“˜ ã€Š[å¼€å‘å®æ–½è®¡åˆ’](docs/development-plan.md)ã€‹ç»™å‡º Atlas/Orion/Hyperion é‡Œç¨‹ç¢‘ä¸‹çš„ Sprint åˆ‡åˆ†ã€äº¤ä»˜èŠ‚å¥ä¸è·¨ Squad åä½œæœºåˆ¶ï¼Œç¡®ä¿ç«™ç‚¹æ¥å…¥ã€è®¢å•/åº“å­˜/å¹¿å‘Šæ‰©å±•ä¸æƒé™å®‰å…¨åŒæ­¥æ¨è¿›ã€‚ã€F:docs/development-plan.mdâ€ L1-L120ã€‘
- ğŸ§© Sprint 0ï¼ˆ01-08 ~ 01-14ï¼‰ï¼šPlatform Integration & Data Engineering è¡¥é½ç«™ç‚¹é…ç½®ã€Temu/TikTok æŒ‡æ ‡æ˜ å°„ï¼Œå¹¶äº§å‡º `platform_metric_profiles` åˆç‰ˆä¸ç«™ç‚¹æ¨¡æ¿ã€‚ã€F:docs/development-plan.mdâ€ L21-L60ã€‘
- ğŸš€ Sprint 1ï¼ˆ01-15 ~ 01-28ï¼‰ï¼šå®Œæˆ `/api/site-modules`ã€ç«™ç‚¹å¯¼èˆªæ”¹é€ ä¸è®¢å•åŸŸå»ºæ¨¡ï¼ŒFrontend Experience äº¤ä»˜è®¢å•ä¸­å¿ƒ MVPï¼ŒAccess & Security ä¸Šçº¿è§’è‰²æ ¡éªŒã€‚ã€F:docs/development-plan.mdâ€ L62-L127ã€‘
- âœ… Sprint 2ï¼ˆ01-29 ~ 02-15ï¼‰ï¼šLazada/Shopee ingest æ¥å…¥ã€Temu/TikTok è¿è¥æ¥å£è½åœ°ã€è®¢å•å¯¼å…¥æµç¨‹ä¸ QA å›å½’å®Œæˆï¼Œå¹¶åŒæ­¥æ›´æ–° `specs/`ã€`rules.json` æ–‡æ¡£ã€‚ã€F:docs/development-plan.mdâ€ L62-L169ã€‘
- ğŸ¤ è§’è‰²åˆ’åˆ†ï¼šPI è´Ÿè´£ç«™ç‚¹/æ¨¡å—æ³¨å†Œï¼ŒDE è´Ÿè´£æ•°æ®æ¨¡å‹ä¸ç®¡é“ï¼ŒFX è´Ÿè´£å‰ç«¯æ¨¡å—è£…é…ï¼ŒAS è´Ÿè´£æƒé™ä¸å®‰å…¨ï¼ŒQA è´Ÿè´£æµ‹è¯•ä¸å‘å¸ƒå®ˆå«ï¼›åä½œæœºåˆ¶ã€éªŒæ”¶é—¨æ§›ä¸é£é™©å¯¹ç­–è¯¦è§è®¡åˆ’æ–‡æ¡£é™„å½•ã€‚ã€F:docs/development-plan.mdâ€ L129-L214ã€‘

## æ ¸å¿ƒåŠŸèƒ½

### ğŸ¯ å¤šæ¸ é“æ¶æ„ (2025-01-06 æ›´æ–°)
- **æ”¯æŒå¹³å°**ï¼šGoogle Adsã€Facebook Adsã€TikTok Ads
- **ç»Ÿä¸€æ•°æ®è¡¨**ï¼š
  - `independent_facebook_ads_daily` - Facebook Adsç»Ÿä¸€è¡¨
  - `independent_tiktok_ads_daily` - TikTok Adsç»Ÿä¸€è¡¨  
  - `independent_landing_metrics` - Google Adsç»Ÿä¸€è¡¨
- **ç«™ç‚¹æ¸ é“é…ç½®**ï¼šé€šè¿‡ `site_channel_configs` è¡¨ç®¡ç†å„ç«™ç‚¹çš„æ¸ é“å¯ç”¨çŠ¶æ€
- **APIç«¯ç‚¹**ï¼š
  - `/api/independent/facebook-ingest` - Facebook Adsæ•°æ®ä¸Šä¼ 
  - `/api/independent/tiktok-ingest` - TikTok Adsæ•°æ®ä¸Šä¼ 
  - `/api/independent/ingest` - Google Adsæ•°æ®ä¸Šä¼ 
  - `/api/independent/stats?channel=<channel>` - å¤šæ¸ é“æ•°æ®æŸ¥è¯¢
  - `/api/ae_query` - é€Ÿå–é€šè‡ªè¿è¥æ•°æ®æŸ¥è¯¢ï¼ˆ`visitor_ratio`ã€`add_to_cart_ratio`ã€`payment_ratio` ç­‰æ¯”ç‡å­—æ®µä»¥0-1çš„å°æ•°è¿”å›ï¼‰

### ğŸ“Š æ•°æ®åˆ†æåŠŸèƒ½
- **è¿è¥åˆ†æ**ï¼šKPIå¯¹æ¯”ã€è¶‹åŠ¿åˆ†æã€å‘¨æœŸå¯¹æ¯”
- **äº§å“åˆ†æ**ï¼šäº§å“è¡¨ç°ã€è½¬åŒ–æ¼æ–—ã€ROIåˆ†æ
- **æ•°æ®æ˜ç»†**ï¼šæ”¯æŒå¤šç»´åº¦ç­›é€‰å’Œå¯¼å‡º

### ğŸª å¹³å°æ”¯æŒ
- **é€Ÿå–é€š**ï¼šå…¨æ‰˜ç®¡ã€è‡ªè¿è¥
- **äºšé©¬é€Š**ï¼šæ•°æ®å¯¼å…¥ä¸åˆ†æ
- **TikTok Shop**ï¼šå¹¿å‘Šæ•°æ®åˆ†æ
- **Temu**ï¼šå¹³å°æ•°æ®æ•´åˆ
- **Ozon**ï¼šä¿„ç½—æ–¯å¸‚åœºåˆ†æ
- **ç‹¬ç«‹ç«™**ï¼šå¤šæ¸ é“å¹¿å‘Šæ•°æ®ç»Ÿä¸€ç®¡ç†

## ç«™ç‚¹æ¡†æ¶ä¸é¡µé¢èŒè´£

### é¡µé¢çŸ©é˜µæ¦‚è§ˆ

| é¡µé¢ | æ ¸å¿ƒç”¨é€” | ä¾§è¾¹æ¨¡å— / é¡¶éƒ¨å¯¼èˆª | ä¸»è¦æ¥å£ |
| --- | --- | --- | --- |
| `index.html` | ä½œä¸ºç»Ÿä¸€å…¥å£å¹¶åœ¨ 1 ç§’å†…è·³è½¬åˆ°é»˜è®¤è‡ªè¿è¥ç«™ç‚¹ï¼Œä¿æŒæ‰€æœ‰ç”¨æˆ·çš„è½åœ°é¡µä¸€è‡´ | é¡¶éƒ¨æ¸å˜åŠ è½½åŠ¨ç”»ï¼Œè‡ªåŠ¨é‡å®šå‘åˆ° Robot ç«™ | â€”ã€F:public/index.htmlâ€ L1-L58ã€‘ |
| `self-operated.html` | é€Ÿå–é€šè‡ªè¿è¥ Robot / Poolslab ç«™çš„æ•°æ®é¢æ¿ï¼Œå«è¿è¥ã€äº§å“ã€è®¢å•ã€å¹¿å‘Šä¸æ˜ç»†äº”å¤§åˆ†æ  | å·¦ä¾§ `ul.sub-nav` å›ºå®šæ¸²æŸ“â€œè¯¦ç»†æ•°æ®/è¿è¥åˆ†æ/äº§å“åˆ†æ/è®¢å•ä¸­å¿ƒ/å¹¿å‘Šä¸­å¿ƒâ€ï¼Œæ¯ä¸ªæ¨¡å—åœ¨ç‹¬ç«‹ `section` ä¸­æ¸²æŸ“å¹¶äº’ä¸å¹²æ‰° | `/api/ae_query`ã€`/api/ae_self_operated/stats`ã€F:public/self-operated.htmlâ€ L520-L744ã€‘ã€F:public/self-operated.htmlâ€ L744-L788ã€‘ |
| `managed.html` | é€Ÿå–é€šå…¨æ‰˜ç®¡ä¸è·¨å¹³å°å¯¼èˆªï¼ˆäºšé©¬é€Šã€TikTokã€Temuã€Ozonã€ç‹¬ç«‹ç«™ç­‰ï¼‰ | é¡¶éƒ¨ `platform-nav` åˆ—å‡ºå¤šå¹³å°å…¥å£ï¼Œå·¦ä¾§æ¨¡å—æ‰©å±•ä¸ºâ€œè¯¦ç»†æ•°æ®/è¿è¥åˆ†æ/äº§å“åˆ†æ/è®¢å•ä¸­å¿ƒ/å¹¿å‘Šä¸­å¿ƒâ€ | `/api/stats`ã€`/api/managed/daily-totals`ã€`/api/ingest`ã€F:public/managed.htmlâ€ L20-L137ã€‘ã€F:public/managed.htmlâ€ L221-L260ã€‘ |
| `independent-site.html` | ç‹¬ç«‹ç«™ Facebook/Google/TikTok æ¸ é“è¿è¥åˆ†æ | ä¾§è¾¹æ åŒæ ·åŒ…å«äº”ä¸ªæ¨¡å—é”šç‚¹ï¼Œåˆ†åˆ«æ‰¿è½½æ¸ é“æ˜ç»†ã€è¿è¥åˆ†æã€äº§å“åˆ†æä»¥åŠè®¢å•/å¹¿å‘Šå ä½ | `/api/independent/stats`ã€`/api/independent/*-ingest`ã€F:public/independent-site.htmlâ€ L697-L759ã€‘ã€F:public/independent-site.htmlâ€ L805-L852ã€‘ |
| `amazon-overview.html` | äºšé©¬é€Šè¿è¥ä¸å¹¿å‘Šæ¦‚è§ˆ | å•é¡µå†…é€šè¿‡ Hash åˆ‡æ¢â€œè¯¦ç»†æ•°æ®/è¿è¥åˆ†æ/äº§å“åˆ†æ/è®¢å•ä¸­å¿ƒ/å¹¿å‘Šä¸­å¿ƒâ€ï¼Œæ—§ `amazon-ads.html` è‡ªåŠ¨é‡å®šå‘è‡³å¹¿å‘Šåˆ†æ  | `/api/amazon/query`ã€`/api/amazon/upsert`ã€F:public/amazon-overview.htmlâ€ L104-L215ã€‘ã€F:public/amazon-ads.htmlâ€ L1-L35ã€‘ |
| `ozon-*.html` | Ozon æŠ¥è¡¨ä¸Šä¼ ä¸å¤šæŒ‡æ ‡åˆ†æ | æ˜ç»†/è¿è¥/äº§å“é¡µé¢å‡è¡¥å……è®¢å•ä¸å¹¿å‘Šå…¥å£ï¼Œå¹¶æ–°å¢ `ozon-orders.html`ã€`ozon-advertising.html`ï¼Œ`ozon-orders.html` é€šè¿‡ `/api/ozon/orders` ç›´æ¥è°ƒç”¨ Seller API æ‹‰å–è®¢å•åæ¸²æŸ“ | `/api/ozon/stats`ã€`/api/ozon/import`ã€`/api/ozon/fetch`ï¼ˆè¿è¥ï¼‰ã€`/api/ozon/orders`ï¼ˆè®¢å•ï¼‰ã€F:public/ozon-detail.htmlâ€ L40-L78ã€‘ã€F:public/ozon-orders.htmlâ€ L1-L154ã€‘ã€F:api/ozon/orders/index.jsâ€ L1-L117ã€‘ |
| `temu.html` / `tiktok.html` | Temuã€TikTok Shop é¢„ç½®é¡µé¢ï¼Œæå‰æš´éœ²äº”å¤§æ¨¡å—å ä½ | ç»§æ‰¿ç»Ÿä¸€å¯¼èˆªä¸å¸ƒå±€ï¼Œç›®å‰å±•ç¤ºâ€œå»ºè®¾ä¸­â€æç¤ºï¼Œç­‰å¾…ç«™ç‚¹ API æ¥å…¥ | â€”ï¼ˆå¾…å®ç°ï¼‰ã€F:public/temu.htmlâ€ L1-L36ã€‘ã€F:public/tiktok.htmlâ€ L1-L36ã€‘ |
| `lazada.html` | Lazada ç«™ç‚¹å£³å±‚ï¼Œç»Ÿä¸€æ‰¿è½½ Lazada åº—é“ºçš„æµé‡ã€è®¢å•ã€åº“å­˜ä¸å¹¿å‘Šå ä½ | å·¦ä¾§ä¿æŒäº”å¤§æ¨¡å—ï¼Œå¹¶ç”± `platform-page.js` è¯»å–å¯¼èˆªå†™å…¥çš„ç«™ç‚¹åç§°ä¸æ ‡é¢˜ | â€”ï¼ˆè§„åˆ’ä¸­ï¼Œå¾… Lazada API æ¥å…¥ï¼‰ã€F:public/lazada.htmlâ€ L1-L88ã€‘ã€F:public/assets/platform-page.jsâ€ L1-L54ã€‘ |
| `shopee.html` | Shopee ç«™ç‚¹å£³å±‚ï¼Œä¸ºä¸œå—äºšå¤šåº—é“ºæä¾›ç»Ÿä¸€æ¨¡å—æ¡†æ¶ | åŒæ ·å¤ç”¨ `platform-page.js`ï¼Œæ ¹æ®å¯¼èˆªé€‰æ‹©åŒæ­¥æ˜¾ç¤ºå½“å‰ç«™ç‚¹ä¿¡æ¯ | â€”ï¼ˆè§„åˆ’ä¸­ï¼Œå¾… Shopee API æ¥å…¥ï¼‰ã€F:public/shopee.htmlâ€ L1-L88ã€‘ã€F:public/assets/platform-page.jsâ€ L1-L54ã€‘ |
| `inventory.html` | å…¨å±€åº“å­˜ç®¡ç†å…¥å£ | å¡ç‰‡å¼å¸ƒå±€æ¦‚è¿°åº“å­˜æ€»è§ˆã€åº“å­˜å˜åŠ¨ä¸é‡‡è´­ç®¡ç†ï¼Œå°†è¿æ¥ `inventory*` ç³»åˆ—è¡¨ | â€”ï¼ˆè§„åˆ’ä¸­ï¼‰ã€F:public/inventory.htmlâ€ L1-L60ã€‘ |
| `permissions.html` | å…¨å±€æƒé™ç®¡ç†å…¥å£ | æ±‡æ€»è§’è‰²çŸ©é˜µã€ç«™ç‚¹æˆæƒä¸å®¡è®¡æ—¥å¿—çš„è®¡åˆ’åŠŸèƒ½ï¼Œå¾…ä¸ admin æƒé™çŸ©é˜µè”åŠ¨ | â€”ï¼ˆè§„åˆ’ä¸­ï¼‰ã€F:public/permissions.htmlâ€ L1-L58ã€‘ |
| `admin.html` | ç®¡ç†åå°ï¼Œå°†ç«™ç‚¹é…ç½®ã€æ¨¡å—åŒæ­¥ä¸æƒé™çŸ©é˜µé›†ä¸­åœ¨ä¸€ä¸ªå…¥å£ | å·¦ä¾§â€œç«™ç‚¹ç®¡ç†/æƒé™çŸ©é˜µ/åŒæ­¥å·¥å…·â€ä¸‰æ®µå¼å¸ƒå±€ï¼Œç«™ç‚¹æ–°å¢åè‡ªåŠ¨è§¦å‘ `/api/site-sync` | `/api/site-configs`ã€`/api/site-sync`ã€F:public/admin.htmlâ€ L1-L320ã€‘ |
| `site-management.html` | è½»é‡ç«™ç‚¹ç™»è®°è§†å›¾ï¼Œæ”¯æŒå¿«é€Ÿåˆ›å»º Lazada/Shopee ç­‰ç«™ç‚¹å¹¶å¼•å¯¼è¿›å…¥ç®¡ç†åå° | å¡ç‰‡å¼ç«™ç‚¹ç½‘æ ¼ + è¡¨å•ï¼Œæäº¤åä¼šè°ƒç”¨ `/api/site-sync` åˆ·æ–°æ¨¡å— | `/api/site-configs`ã€`/api/site-sync`ã€F:public/site-management.htmlâ€ L1-L420ã€‘ |

- **å…¥å£é¡µ `public/index.html`**ï¼šä½œä¸ºå¹³å°é—¨æˆ·ï¼Œå†…ç½®æ¸å˜è¿‡æ¸¡å’ŒåŠ è½½åŠ¨ç”»ï¼Œå¹¶åœ¨ 1 ç§’å†…è‡ªåŠ¨é‡å®šå‘åˆ°è‡ªè¿è¥ Robot ç«™ï¼Œç¡®ä¿é»˜è®¤è½åœ°é¡µä¸€è‡´ã€‚ã€F:public/index.htmlâ€ L1-L58ã€‘
- **è‡ªè¿è¥é¡µ `public/self-operated.html`**ï¼šèšåˆ DataTablesã€EChartsã€Flatpickr ç­‰åº“ï¼Œä¾§è¾¹æ å›ºå®šåŒ…å«â€œè¯¦ç»†æ•°æ®/è¿è¥åˆ†æ/äº§å“åˆ†æ/è®¢å•ä¸­å¿ƒ/å¹¿å‘Šä¸­å¿ƒâ€äº”å¤§æ¨¡å—ï¼›è®¢å•ä¸å¹¿å‘Šæ¿å—æš‚æä¾›å ä½è¯´æ˜ï¼Œé»˜è®¤ç«™ç‚¹åŒ…å« Robot ä¸ Poolslabï¼Œå¯åœ¨å¯¼èˆªä¸­å¿«é€Ÿåˆ‡æ¢ã€‚ã€F:public/self-operated.htmlâ€ L520-L788ã€‘ã€F:public/assets/site-nav.jsâ€ L12-L191ã€‘
- **å…¨æ‰˜ç®¡é¡µ `public/managed.html`**ï¼šå¸¦ç™»å½•è¦†ç›–å±‚ä¸ç»Ÿä¸€ä¾§è¾¹æ ï¼Œé¡¶éƒ¨å¯¼èˆªæ¶µç›–é€Ÿå–é€šã€äºšé©¬é€Šã€TikTokâ€¯Shopã€Temuã€Ozonã€ç‹¬ç«‹ç«™ç­‰å¹³å°ï¼›é¡µé¢å†…æŒ‰ Hash åˆ‡åˆ†â€œè¯¦ç»†æ•°æ®/è¿è¥åˆ†æ/äº§å“åˆ†æ/è®¢å•ä¸­å¿ƒ/å¹¿å‘Šä¸­å¿ƒâ€ï¼Œå¹¶æ”¯æŒä¸Šä¼ å…¨æ‰˜ç®¡å‘¨/æœˆæŠ¥è¡¨ã€‚ã€F:public/managed.htmlâ€ L20-L260ã€‘
- **ç®¡ç†åå° `public/admin.html`**ï¼šé›†ä¸­æä¾›ç«™ç‚¹é…ç½®ã€æƒé™çŸ©é˜µä¸ç«™ç‚¹åŒæ­¥å·¥å…·ï¼Œè¡¨å•å†…ç½® Lazada/Shopee/TikTok/Temu æ¨¡æ¿å¹¶ä¼šè‡ªåŠ¨è§¦å‘ `/api/site-sync`ï¼Œæƒé™çŸ©é˜µéƒ¨åˆ†å¤ç”¨ `rules.json` é»˜è®¤è§’è‰²ã€‚ã€F:public/admin.htmlâ€ L1-L420ã€‘
- **ç«™ç‚¹ç®¡ç†é¡µ `public/site-management.html`**ï¼šè½»é‡åŒ–çš„ç«™ç‚¹ç™»è®°å…¥å£ï¼Œè¡¨å•ç›´æ¥å†™å…¥ `site_configs` å¹¶è°ƒç”¨ `/api/site-sync`ï¼Œåœ¨æˆåŠŸåˆ›å»ºåå¼•å¯¼ç®¡ç†å‘˜å‰å¾€ `admin.html` åšè¿›ä¸€æ­¥é…ç½®ã€‚ã€F:public/site-management.htmlâ€ L1-L420ã€‘
- **ç‹¬ç«‹ç«™é¡µ `public/independent-site.html`**ï¼šé¢å‘ Landing Page è¿è¥åˆ†æï¼Œä¾§è¾¹æ åŒæ­¥æ‰©å±•è‡³äº”å¤§æ¨¡å—ï¼ŒåŒ…å«æ¸ é“é€‰æ‹©ã€æ—¶é—´æ§ä»¶ã€KPI å¡ç‰‡ä¸æ•°æ®æ˜ç»†ï¼Œå¹¶ä¿ç•™åˆ—æ˜¾éšã€äº§å“åŒå‡»è·³è½¬ç­‰å¢å¼ºäº¤äº’ã€‚ã€F:public/independent-site.htmlâ€ L697-L852ã€‘
- **äºšé©¬é€Šæ€»è§ˆ `public/amazon-overview.html`**ï¼šæŒ‰ Amazon æŒ‡æ ‡æ„å»º KPIã€è¶‹åŠ¿å›¾å’Œæ˜ç»†è¡¨çš„æ€»è§ˆé¡µï¼Œä¾§è¾¹æ æ–°å¢äº”å¤§æ¨¡å—å¹¶é€šè¿‡ Hash åˆ‡æ¢ï¼Œ`amazon-ads.html` è´Ÿè´£é‡å®šå‘åˆ°æ–°çš„å¹¿å‘Šåˆ†æ ã€‚ã€F:public/amazon-overview.htmlâ€ L104-L215ã€‘ã€F:public/amazon-ads.htmlâ€ L1-L35ã€‘
- **Ozon é¡µé¢é›†**ï¼š`public/ozon-detail.html` ç­‰é¡µé¢æä¾›ä¸Šä¼ å…¥å£ã€æ—¥æœŸç­›é€‰åŠå¤šå›¾è¡¨åˆ†æ ï¼Œå¹¶è¡¥å……è®¢å•ä¸­å¿ƒã€å¹¿å‘Šä¸­å¿ƒå…¥å£ï¼›`ozon-orders.html` å·²é€šè¿‡ `/api/ozon/orders` è°ƒç”¨ Seller API åŒæ­¥è®¢å•å¤´ä¸æ˜ç»†ï¼Œä¿æŒä¸è¿è¥æ•°æ®çš„äº§å“ ID å¯¹é½ï¼Œå¹¿å‘Šæ¨¡å—ä»é¢„ç•™å®˜æ–¹ API æ¥å…¥ã€‚ã€F:public/ozon-detail.htmlâ€ L40-L78ã€‘ã€F:public/ozon-orders.htmlâ€ L1-L154ã€‘ã€F:api/ozon/orders/index.jsâ€ L1-L117ã€‘
- **Temu/TikTok å ä½é¡µ**ï¼š`public/temu.html` ä¸ `public/tiktok.html` å·²æ¥å…¥ç»Ÿä¸€å¯¼èˆªä¸å¸ƒå±€ï¼Œå¹¶é¢„ç•™â€œè¯¦ç»†æ•°æ®/è¿è¥åˆ†æ/äº§å“åˆ†æ/è®¢å•ä¸­å¿ƒ/å¹¿å‘Šä¸­å¿ƒâ€äº”ä¸ªåˆ†æ å ä½ï¼Œç­‰å¾…åç«¯æ¥å£è¡¥é½ã€‚ã€F:public/temu.htmlâ€ L1-L36ã€‘ã€F:public/tiktok.htmlâ€ L1-L36ã€‘
- **Lazada/Shopee å£³å±‚**ï¼š`public/lazada.html` ä¸ `public/shopee.html` å¤ç”¨ç»Ÿä¸€æ¨¡å—å¸ƒå±€ï¼Œå¹¶å€ŸåŠ© `assets/platform-page.js` è¯»å–å¯¼èˆªå†™å…¥çš„ç«™ç‚¹é€‰æ‹©ã€åŒæ­¥é¡µé¢æ ‡é¢˜ï¼Œä¸ºåç»­ Lazada/Shopee API æ¥å…¥é¢„ç•™å ä½ã€‚ã€F:public/lazada.htmlâ€ L1-L88ã€‘ã€F:public/shopee.htmlâ€ L1-L88ã€‘ã€F:public/assets/platform-page.jsâ€ L1-L54ã€‘
- **åŠ¨æ€å¯¼èˆªè„šæœ¬ `public/assets/site-nav.js`**ï¼šåˆå§‹åŒ–æ—¶è°ƒç”¨ `/api/site-configs` åˆå¹¶é»˜è®¤ç«™ç‚¹ï¼Œè‡ªåŠ¨æ’å…¥ Lazadaã€Shopee ç­‰å¹³å°å…¥å£ï¼Œå¹¶åœ¨ç‚¹å‡»ç«™ç‚¹åå†™å…¥ `localStorage` ä¾›å£³å±‚é¡µé¢æ˜¾ç¤ºå½“å‰ç«™ç‚¹åç§°ã€‚ã€F:public/assets/site-nav.jsâ€ L24-L309ã€‘ã€F:public/assets/site-nav.jsâ€ L563-L589ã€‘
- **åº“å­˜ç®¡ç† `public/inventory.html`**ï¼šå…¨å±€å…¥å£ä»¥å¡ç‰‡å½¢å¼æè¿°åº“å­˜æ€»è§ˆã€åº“å­˜å˜åŠ¨ä¸é‡‡è´­ç®¡ç†æ¨¡å—ï¼Œåç»­ä¸Šçº¿åå°†ç›´æ¥æ¥å…¥ `inventory`ã€`inventory_movements`ã€`purchases` æ•°æ®è¡¨ã€‚ã€F:public/inventory.htmlâ€ L1-L60ã€‘
- **æƒé™ç®¡ç† `public/permissions.html`**ï¼šå…¨å±€å…¥å£æ±‡æ€»è§’è‰²çŸ©é˜µã€ç«™ç‚¹æˆæƒå’Œå®¡è®¡æ—¥å¿—ä¸‰å¤§èƒ½åŠ›ï¼Œæœªæ¥ä¼šä¸ admin æƒé™çŸ©é˜µå…±äº«æ•°æ®æºä»¥ç»´æŒä¸€è‡´æ€§ã€‚ã€F:public/permissions.htmlâ€ L1-L58ã€‘

### ç«™ç‚¹é…ç½®ä¸æ¸ é“è¡¨

- **`site_configs`**ï¼šå­˜æ”¾ç«™ç‚¹ IDã€å¹³å°ã€æ˜¾ç¤ºåç§°ã€æ•°æ®æºã€æ¨¡æ¿ç­‰å…ƒæ•°æ®ï¼Œæ˜¯æ‰€æœ‰ç«™ç‚¹é¡µé¢ä¸æ¥å£çš„æ³¨å†Œä¸­å¿ƒã€‚ã€F:docs/site-configuration-framework.mdâ€ L11-L45ã€‘
- **`site_channel_configs`**ï¼šæŒ‰ç«™ç‚¹ç»´æŠ¤å¯ç”¨çš„æ¸ é“ä¸å¯¹åº”çš„æŒ‡æ ‡è¡¨ï¼ˆå¦‚ Facebook Ads/Google Adsï¼‰ï¼Œè‡ªè¿è¥ã€ç‹¬ç«‹ç«™ã€å…¨æ‰˜ç®¡ç­‰é¡µé¢åœ¨åŠ è½½æ—¶è¯»å–è¯¥è¡¨å†³å®šå¯ç”¨æ¨¡å—ã€‚ã€F:README.mdâ€ L340-L371ã€‘
- **`site_module_configs`**ï¼šæ§åˆ¶ç«™ç‚¹å¯¼èˆªçš„æ¨¡å—ã€é¡ºåºã€å¯è§è§’è‰²ï¼Œä½¿ç”¨ `COALESCE(site_id, '')` + `platform` + `module_key` çš„å”¯ä¸€ç´¢å¼•é¿å… NULL å†²çªï¼Œå¹¶é¢„ç½®å…¨å±€é»˜è®¤æ¨¡å—æ¨¡æ¿ã€‚ã€F:specs/data-model.sqlâ€ L20-L76ã€‘
- **ç´¢å¼•ä¸è®¿é—®ç­–ç•¥**ï¼š`site_configuration_framework.sql` ä¸º `site_configs` å»ºç«‹ `platform`ã€`data_source` ç´¢å¼•ï¼Œä¾¿äº Lazadaã€Shopee ç­‰å¹³å°æ‰©å±•ï¼›ç›¸å…³è¡¨å¯ç”¨äº† RLS ç­–ç•¥ä»¥æ§åˆ¶è®¿é—®èŒƒå›´ã€‚ã€F:site_configuration_framework.sqlâ€ L215-L256ã€‘
- **Lazada/Shopee æ ·ä¾‹**ï¼šè¿ç§»è„šæœ¬å†…ç½® `lazada_my_flagship`ã€`shopee_sg_flagship` ç§å­æ•°æ®ï¼Œå¡«å…… `platform=lazada/shopee` ä¸ `data_source=lazada_api/shopee_api`ï¼Œä¾¿äºåœ¨ç®¡ç†åå°ç›´æ¥å¤ç”¨æ¨¡æ¿ã€‚ã€F:site_configuration_framework.sqlâ€ L94-L115ã€‘
- **ç«™ç‚¹åŒæ­¥**ï¼šåˆ›å»ºæˆ–é‡å‘½åç«™ç‚¹åï¼Œé€šè¿‡ `/api/site-sync` å°† `ae_self_operated_daily` ç­‰è¡¨ä¸­çš„ `site` å­—æ®µç»Ÿä¸€ä¸ºæ–° IDï¼Œé¿å…å†å²æ•°æ®å­¤ç«‹ã€‚ã€F:api/site-sync/index.jsâ€ L33-L118ã€‘

```sql
CREATE TABLE public.site_configs (
  id text PRIMARY KEY,
  name text NOT NULL,
  platform text NOT NULL,
  display_name text NOT NULL,
  domain text,
  data_source text NOT NULL,
  template_id text,
  config_json jsonb,
  is_active boolean DEFAULT true,
  created_at timestamptz NOT NULL DEFAULT now(),
  updated_at timestamptz NOT NULL DEFAULT now()
);

CREATE INDEX IF NOT EXISTS idx_site_configs_platform ON public.site_configs(platform);
CREATE INDEX IF NOT EXISTS idx_site_configs_data_source ON public.site_configs(data_source);
```

*DDL èŠ‚é€‰è‡ªç«™ç‚¹é…ç½®æ¡†æ¶è„šæœ¬ï¼Œä¾¿äºåœ¨ Supabase ä¸­å¿«é€Ÿæ ¸å¯¹è¡¨ç»“æ„ä¸ç´¢å¼•ã€‚*ã€F:docs/site-configuration-framework.mdâ€ L11-L25ã€‘ã€F:site_configuration_framework.sqlâ€ L246-L248ã€‘

### Phase 2 ç®¡ç†åŸŸè¡¨æ¦‚è§ˆ

- **æƒé™åŸŸ**ï¼š`roles` ä½¿ç”¨ JSONB å­˜å‚¨èµ„æº â†’ æ“ä½œçŸ©é˜µï¼Œ`users` é€šè¿‡ `role_id` å…³è”è§’è‰²å¹¶å¯ç”¨è¡Œçº§å®‰å…¨ï¼Œé»˜è®¤å†™å…¥ä¸ƒä¸ªè§’è‰²åŠæƒé™æ¨¡æ¿ã€‚ã€F:specs/data-model.sqlâ€ L42-L112ã€‘
- **å•†å“ä¸»æ•°æ®**ï¼š`categories`ã€`products` æè¿°å“ç±»ã€SKUã€å°ºå¯¸ä¸å›¾åƒä¿¡æ¯ï¼Œå¹¶åœ¨æ›´æ–°æ—¶è§¦å‘ `set_updated_at`ï¼Œä¾›åº“å­˜ä¸å¹¿å‘Šæ¨¡å—å¼•ç”¨ã€‚ã€F:specs/data-model.sqlâ€ L114-L142ã€‘ã€F:specs/data-model.sqlâ€ L214-L220ã€‘
- **åº“å­˜åŸŸ**ï¼š`inventory` æŒ‰ç«™ç‚¹ä¸äº§å“ç»´åº¦è®°å½•å¯å”®/é¢„ç•™æ•°é‡åŠæˆæœ¬ä»·ï¼Œ`inventory_movements` è¿½è¸ªå…¥å‡ºåº“ä¸è°ƒæ‹¨ï¼Œ`purchases` è®°å½•é‡‡è´­å•ä¸åˆ°è´§ä¿¡æ¯ã€‚ã€F:specs/data-model.sqlâ€ L116-L164ã€‘
- **è®¢å•åŸŸ**ï¼š`customers`ã€`orders`ã€`order_items` å½¢æˆè®¢å•å¤´/æ˜ç»†ç»“æ„ï¼Œå†…å»ºç‰©æµæˆæœ¬ã€ç»“ç®—çŠ¶æ€ä¸ç«™ç‚¹å¤–é”®ï¼Œæ”¯æŒåç»­åˆ©æ¶¦åˆ†æä¸åº“å­˜æ‰£å‡ã€‚ã€F:specs/data-model.sqlâ€ L166-L194ã€‘
- **å¹¿å‘ŠåŸŸ**ï¼š`ad_campaigns` ä¿å­˜é¢„ç®—ã€ç›®æ ‡ä¸å—ä¼—é…ç½®ï¼Œ`ad_metrics_daily` è®°å½•æŒ‰æ—¥èšåˆæŒ‡æ ‡å¹¶ä»¥ç«™ç‚¹ä¸ºåˆ†åŒºé”®ï¼ŒäºŒè€…å‡é™„å¸¦å”¯ä¸€çº¦æŸä¸ç´¢å¼•ã€‚ã€F:specs/data-model.sqlâ€ L168-L222ã€‘
- **ç»Ÿä¸€è§¦å‘å™¨ä¸ RLS**ï¼š`set_updated_at` è§¦å‘å™¨è¦†ç›–è®¢å•ã€äº§å“ã€å¹¿å‘Šã€æ¨¡å—é…ç½®ï¼Œå…³é”®è¡¨é»˜è®¤å¯ç”¨ RLS å¹¶ä»¥å®½æ¾ç­–ç•¥å¼€æ”¾å¼€å‘æœŸè®¿é—®ã€‚ã€F:specs/data-model.sqlâ€ L224-L266ã€‘

### è·¨æ¨¡å—çš„äº§å“ ID / å•†å“ç»´åº¦é“¾è·¯

- **è¿è¥ â†’ äº§å“åˆ†æ**ï¼šè‡ªè¿è¥æŸ¥è¯¢æ¥å£ä¼šæŒ‰ `product_id` èšåˆæ›å…‰ã€è®¿å®¢ã€åŠ è´­ã€æ”¯ä»˜ç­‰æŒ‡æ ‡ï¼Œæ—¢æ”¯æŒæŒ‰æ—¶é—´ç²’åº¦ä¹Ÿæ”¯æŒæŒ‰äº§å“æ±‡æ€»ï¼Œæ˜¯äº§å“åˆ†æä¸åº“å­˜è”åŠ¨çš„åŸºå‡†æ•°æ®ã€‚ã€F:api/ae_query/index.jsâ€ L35-L199ã€‘
- **å¹¿å‘Š â†’ äº§å“åˆ†æ**ï¼šç‹¬ç«‹ç«™ Facebook/TikTok/Google ingest åœ¨ä¸Šä¼ æ—¶æå– `product_id`ã€`product_name` å¹¶ç»´æŠ¤é¦–è´­æ—¶é—´ï¼Œç¡®ä¿å¹¿å‘Šè½¬åŒ–å¯ä¸å•†å“ç»´åº¦å…³è”ã€‚ã€F:api/independent/facebook-ingest/index.jsâ€ L8-L140ã€‘ã€F:api/independent/ingest/index.jsâ€ L69-L200ã€‘
- **Ozon / äºšé©¬é€Š â†’ åº“å­˜**ï¼šOzon å¯¼å…¥ä¼šå°† `sku` å¼ºåˆ¶è½¬æ¢ä¸ºå­—ç¬¦ä¸²å¹¶èšåˆå•†å“çº§æŒ‡æ ‡ï¼›äºšé©¬é€ŠæŸ¥è¯¢åŒæ ·ä»¥ ASIN ä¸ºä¸»é”®ï¼Œæ–¹ä¾¿ä¸è®¢å•ã€åº“å­˜æ¨¡å—å¯¹é½ã€‚ã€F:api/ozon/import/index.jsâ€ L112-L200ã€‘ã€F:api/ozon/stats/index.jsâ€ L90-L181ã€‘ã€F:api/amazon/query/index.jsâ€ L21-L125ã€‘
- **åº“å­˜ / æƒé™æ‰©å±•**ï¼šåº“å­˜ä¸æƒé™ä»ä½œä¸ºå…¨å±€æ¨¡å—è§„åˆ’ï¼Œä½†å…¶æ¥å£å¿…é¡»å¤ç”¨ä¸Šè¿°å•†å“æ ‡è¯†ï¼Œè§„åˆ™å†™åœ¨ `rules.json` ä¸­ï¼Œåç»­ä¸Šçº¿åå¯ä»¥ç›´æ¥ä¸ `product_id` ç»´åº¦å¯¹é½ã€‚ã€F:rules.jsonâ€ L4-L76ã€‘

### å­ç«™ç‚¹å·¦ä¾§å¯¼èˆªä¸æ¨¡å—éš”ç¦»
- **ç‹¬ç«‹æ¨¡å—å®¹å™¨**ï¼šæ¯ä¸ªç«™ç‚¹é¡µçš„ä¾§è¾¹æ å‡ä»¥ `<ul class="sub-nav">` æ³¨å†Œåˆ†æ ï¼Œåˆ†åˆ«å¯¹åº” `section#detail`ã€`section#analysis`ã€`section#products` ç­‰ç‹¬ç«‹ DOM å®¹å™¨ï¼Œä¿è¯æ¨¡å—ä¹‹é—´çš„æ ·å¼ä¸æ•°æ®é€»è¾‘äº’ä¸å¹²æ‰°ã€‚ã€F:public/self-operated.htmlâ€ L520-L556ã€‘ã€F:public/managed.htmlâ€ L82-L137ã€‘
- **ç»Ÿä¸€æ¨¡å—é¡ºåº**ï¼šæ‰€æœ‰ç«™ç‚¹é¡µé¢å·¦ä¾§å¯¼èˆªç°å·²ç»Ÿä¸€ä¸ºâ€œè¯¦ç»†æ•°æ®/è¿è¥åˆ†æ/äº§å“åˆ†æ/è®¢å•ä¸­å¿ƒ/å¹¿å‘Šä¸­å¿ƒâ€ï¼Œå³ä¾¿éƒ¨åˆ†æ¨¡å—æš‚ä¸ºå ä½ï¼Œä¹Ÿä¼šé€šè¿‡ç‹¬ç«‹å®¹å™¨æ‰¿è½½å†…å®¹å¹¶ä¿æŒåç»­æ¥å…¥çš„ä¸€è‡´æ€§ã€‚ã€F:public/self-operated.htmlâ€ L520-L788ã€‘ã€F:public/amazon-overview.htmlâ€ L104-L215ã€‘
- **æ¨¡å—éš”ç¦»ç­–ç•¥**ï¼šå„æ¨¡å—åŠ è½½è‡ªèº«çš„æ•°æ®ä¸è„šæœ¬ï¼Œä¸å…±äº«çŠ¶æ€ï¼›è·¨æ¨¡å—çš„æ•°æ®è”åŠ¨ï¼ˆå¦‚å¹¿å‘Šå¸¦æ¥çš„è®¢å•ï¼‰é€šè¿‡åç«¯èšåˆ API æä¾›æ±‡æ€»ç»“æœï¼Œå†ç”±å‰ç«¯å„è‡ªæ¸²æŸ“ï¼Œé¿å…ç›´æ¥è·¨ DOM æ“ä½œã€‚
- **å…¨å±€è®¾ç½®å…¥å£**ï¼šåº“å­˜ç®¡ç†ä¸æƒé™ç®¡ç†ä½äºå…¨å±€è®¾ç½®ï¼ˆSettingsï¼‰åˆ†ç»„ä¸­ï¼Œä¸å‡ºç°åœ¨å•ä¸ªç«™ç‚¹çš„ä¾§è¾¹æ ï¼Œåªæœ‰å…·å¤‡ç›¸åº”è§’è‰²çš„ç”¨æˆ·æ‰ä¼šåœ¨é¡¶æ æˆ–å…¨å±€æŠ½å±‰çœ‹åˆ°å…¥å£ï¼Œé¿å…è¶Šæƒè®¿é—®ï¼›å¯¹åº”çš„ `inventory.html`ã€`permissions.html` é¡µé¢æä¾›èƒ½åŠ›è¯´æ˜ä¸å ä½å¸ƒå±€ã€‚ã€F:public/inventory.htmlâ€ L1-L60ã€‘ã€F:public/permissions.htmlâ€ L1-L58ã€‘

### ç«™ç‚¹ä¸æ¸ é“åˆ†ç±»
- **é€Ÿå–é€šè‡ªè¿è¥**ï¼šé»˜è®¤æä¾› Robot ç«™ï¼ˆ`ae_self_operated_a`ï¼‰ä¸ Poolslab ç«™ï¼ˆ`ae_self_operated_poolslab_store`ï¼‰ï¼Œå¯é€šè¿‡ç«™ç‚¹é€‰æ‹©å™¨å’Œ `localStorage` è®°å¿†åˆ‡æ¢ã€‚ã€F:public/assets/site-nav.jsâ€ L12-L191ã€‘
- **é€Ÿå–é€šå…¨æ‰˜ç®¡**ï¼šé€šè¿‡é¡¶éƒ¨â€œé€Ÿå–é€š â†’ å…¨æ‰˜ç®¡â€ä¸‹æ‹‰èœå•åŠ è½½ç«™ç‚¹åˆ—è¡¨ï¼Œé…åˆä¸Šä¼ æ§ä»¶ä¸å¤šå›¾è¡¨åˆ†æã€‚ã€F:public/managed.htmlâ€ L9-L122ã€‘
- **ç‹¬ç«‹ç«™**ï¼šæ”¯æŒ Facebookã€Googleã€TikTok æ¸ é“ï¼Œç«™ç‚¹é»˜è®¤åŒ…å« `poolsvacuum.com` ä¸ `icyberite.com`ï¼Œå¹¶åœ¨å¯¼èˆªä¸‹æ‹‰ä¸é¡µé¢å†…åŒæ­¥æ˜¾ç¤ºã€‚ã€F:public/assets/site-nav.jsâ€ L193-L227ã€‘
- **å¤šå¹³å°æ‰©å±•**ï¼šå¯¼èˆªè„šæœ¬ä¼šåœ¨åˆå§‹åŒ–æ—¶è¯»å– `site-configs`ï¼Œä¸º Lazadaã€Shopee ç­‰æ–°å¹³å°è‡ªåŠ¨æ’å…¥å…¥å£å¹¶åŒæ­¥ç«™ç‚¹ä¸‹æ‹‰ï¼Œæœªæ³¨å†Œçš„å¹³å°ä¸ä¼šæ˜¾ç¤ºå…¥å£ã€‚ã€F:public/assets/site-nav.jsâ€ L24-L309ã€‘ã€F:public/assets/site-nav.jsâ€ L563-L589ã€‘

- **è¿è¥åˆ†æ**ï¼šå„ç«™ç‚¹çš„è¿è¥æ¨¡å—ç»§ç»­æ‰¿è½½æ›å…‰ã€è®¿å®¢ã€åŠ è´­ã€æ”¯ä»˜é“¾è·¯ï¼Œå“åº”å¼é¢æ¿ä»¥ `section#analysis` æˆ–åŒçº§å®¹å™¨æ‰¿è½½å›¾è¡¨ä¸ KPI å¡ç‰‡ã€‚ã€F:public/self-operated.htmlâ€ L624-L745ã€‘ã€F:public/managed.htmlâ€ L144-L198ã€‘
- **äº§å“åˆ†æ**ï¼šä¿ç•™ç‹¬ç«‹çš„äº§å“èšåˆä¸å¯¹æ¯”è§†å›¾ï¼Œæ¨¡å—åœ¨ `section#products` ä¸­åˆå§‹åŒ–å¹¶ä½¿ç”¨ç‹¬ç«‹çš„æ•°æ®è¯·æ±‚ï¼Œç¡®ä¿ç­›é€‰å™¨ã€è¡¨æ ¼ä¸å›¾è¡¨ä¸å…¶ä»–æ¨¡å—éš”ç¦»ã€‚ã€F:public/self-operated.htmlâ€ L687-L775ã€‘ã€F:public/managed.htmlâ€ L139-L208ã€‘
- **è®¢å•ä¸­å¿ƒ**ï¼šé¢å‘æ¯ä¸ªç«™ç‚¹åœ¨å·¦ä¾§å¯¼èˆªæ–°å¢â€œè®¢å•ä¸­å¿ƒâ€é”šç‚¹ï¼Œæ ¸å¿ƒä¾èµ– `orders`ï¼ˆå«ç‰©æµã€æˆæœ¬ã€ç»“ç®—å­—æ®µï¼‰ã€`order_items`ï¼ˆå•†å“æ˜ç»†ï¼‰ã€`customers`ï¼ˆå®¢æˆ·æ¡£æ¡ˆï¼‰ä¸‰å¼ è¡¨ï¼Œå¹¶é€šè¿‡ `inventory_movements` è¡¥è¶³å‡ºå…¥åº“å¼•ç”¨ï¼Œæ”¯æŒåˆ©æ¶¦æ‹†è§£ä¸å±¥çº¦çŠ¶æ€å›æº¯ï¼›æ¨¡å—è½ä½ä¸å­—æ®µæ˜ å°„è¯¦è§æ¶æ„è“å›¾ä¸æ•°æ®æ¨¡å‹ã€‚ã€F:docs/platform-architecture.mdâ€ L69-L104ã€‘ã€F:specs/data-model.sqlâ€ L86-L164ã€‘
- **å¹¿å‘Šä¸­å¿ƒ**ï¼šä½œä¸ºç«™ç‚¹çº§æ¨¡å—ç‹¬ç«‹å‘ˆç°å¹¿å‘Šç³»åˆ—ä¸æ—¥æŒ‡æ ‡ï¼Œä¾æ‰˜ `ad_campaigns` + `ad_metrics_daily` ç»“æ„ä¸ `/api/ads/*` æ¥å£æ„å»ºï¼Œå¹¶åœ¨ä¾§è¾¹æ æä¾›å¯¼èˆªå ä½ï¼›å„ç«™ç‚¹ä¸å¤ç”¨ä»–ç«™æ•°æ®æºï¼Œä¿éšœéš”ç¦»ï¼ŒåŒæ—¶æ”¯æŒè®°å½•æ—¥é¢„ç®—ã€æŠ•æ”¾ç›®æ ‡ä¸å—ä¼—ç”»åƒã€‚ã€F:docs/platform-architecture.mdâ€ L104-L133ã€‘ã€F:specs/openapi.yamlâ€ L1337-L1445ã€‘ã€F:specs/data-model.sqlâ€ L168-L222ã€‘
- **åº“å­˜ä¸­å¿ƒï¼ˆå…¨å±€ï¼‰**ï¼šåº“å­˜ç›¸å…³è§†å›¾ä¸å±äºå…·ä½“ç«™ç‚¹ä¾§è¾¹æ ï¼Œè€Œåœ¨å…¨å±€è®¾ç½®å†…ç»Ÿä¸€å±•ç¤ºï¼Œè¯»å– `inventory`ã€`inventory_movements` ä¸ `purchases` æ•°æ®å¹¶å—æƒé™æ§åˆ¶ï¼Œä»…å¯¹å…·å¤‡åº“å­˜è§’è‰²çš„ç”¨æˆ·å¼€æ”¾ã€‚ã€F:docs/platform-architecture.mdâ€ L75-L101ã€‘ã€F:specs/data-model.sqlâ€ L116-L164ã€‘ã€F:rules.jsonâ€ L23-L55ã€‘
- **æƒé™ä¸­å¿ƒï¼ˆå…¨å±€ï¼‰**ï¼šæƒé™ç®¡ç†ç‹¬ç«‹äºç«™ç‚¹å¯¼èˆªï¼Œé‡‡ç”¨ RBAC + èµ„æºèŒƒå›´æ¨¡å‹ï¼Œé€šè¿‡ `roles`ï¼ˆå†…åµŒ JSON æƒé™çŸ©é˜µï¼‰ä¸ `users.role_id` æ§åˆ¶æ¨¡å—å¯è§æ€§ï¼Œæ˜¯å…¨ç«™å…±äº«çš„å®‰å…¨å±‚ï¼›é»˜è®¤ç­–ç•¥åœ¨ `rules.json` ä¸ RLS ç­–ç•¥ä¸­å£°æ˜ã€‚ã€F:docs/platform-architecture.mdâ€ L118-L147ã€‘ã€F:specs/data-model.sqlâ€ L42-L104ã€‘ã€F:rules.jsonâ€ L40-L79ã€‘

## API æ¥å£ä¸å‚æ•°è¯´æ˜

### é€šç”¨ä¸ç«™ç‚¹ç®¡ç†
- `GET /api/health`ï¼šè¿”å›å½“å‰è¯·æ±‚æ–¹æ³•ã€URLã€æ—¶é—´æˆ³ä¸è¿è¡Œç¯å¢ƒçš„å¥åº·çŠ¶æ€å“åº”ã€‚ã€F:api/health.jsâ€ L1-L19ã€‘
- `GET /api/sites`ï¼šæ‹‰å– `sites` è¡¨å†…å¯ç”¨ç«™ç‚¹åˆ—è¡¨ï¼Œä¾›å‰ç«¯å¯¼èˆªå’Œä¸‹æ‹‰é€‰æ‹©ä½¿ç”¨ã€‚ã€F:api/sites/index.jsâ€ L1-L44ã€‘
- `GET /api/site-configs`ï¼šæšä¸¾ `site_configs` å…¨é‡é…ç½®ï¼Œç”¨äºç«™ç‚¹ç®¡ç†ä¸ç®¡ç†åå°æ¸²æŸ“ï¼›`platform` å­—æ®µæ”¯æŒ `ae_self_operated/ae_managed/amazon/ozon/tiktok/temu/lazada/shopee` ç­‰æšä¸¾ï¼Œ`data_source` ä¸æ¨¡æ¿æšä¸¾åŒæ­¥åœ¨ `specs/openapi.yaml` ä¸­ç»´æŠ¤ã€‚ã€F:api/site-configs/index.jsâ€ L1-L87ã€‘ã€F:specs/openapi.yamlâ€ L548-L609ã€‘
- `POST /api/site-configs`ï¼šæ¥å— `SiteConfigPayload`ï¼ˆç«™ç‚¹åç§°ã€å¹³å°ã€æ˜¾ç¤ºåã€æ•°æ®æºã€å¯é€‰åŸŸå/æ¨¡æ¿/é…ç½® JSONï¼‰ï¼Œè¿”å›åˆ›å»ºåçš„ç«™ç‚¹é…ç½®å¹¶åœ¨ç®¡ç†åå°è‡ªåŠ¨è§¦å‘åŒæ­¥æµç¨‹ã€‚ã€F:api/site-configs/index.jsâ€ L38-L86ã€‘ã€F:specs/openapi.yamlâ€ L548-L609ã€‘
- `PUT /api/site-configs/[id]`ï¼šæŒ‰ ID æ›´æ–°ç«™ç‚¹é…ç½®å­—æ®µï¼Œæ”¯æŒåŒæ­¥ä¿®æ”¹ `name`ã€`platform`ã€`data_source`ã€`config_json` ç­‰ä¿¡æ¯ï¼›`DELETE` å¯ç§»é™¤ç«™ç‚¹è®°å½•ã€‚ã€F:api/site-configs/[id].jsâ€ L1-L88ã€‘
- `POST /api/site-configs/update`ï¼šæä¾›ä¸ `PUT` ç­‰ä»·çš„æ›´æ–°å…¥å£ï¼Œä¾¿äºå‰ç«¯é€šè¿‡ç»Ÿä¸€ POST è¡¨å•æäº¤ã€‚ã€F:api/site-configs/update.jsâ€ L1-L74ã€‘
- `POST /api/site-sync`ï¼šåœ¨ç«™ç‚¹åˆ›å»ºæˆ–é‡å‘½åæ—¶åŒæ­¥ `ae_self_operated_daily` ç­‰æ•°æ®è¡¨çš„ `site` å­—æ®µï¼Œå¯åœ¨è¯·æ±‚ä½“ä¸­ä¼ å…¥ `siteId`ã€`oldSiteId`ã€`action`ï¼ˆ`create`/`update`ï¼‰ã€‚ã€F:api/site-sync/index.jsâ€ L1-L111ã€‘
- `GET /api/site-modules`ï¼šè¿”å›å…¨å±€é»˜è®¤æ¨¡å—æ¨¡æ¿ä¸å­—æ®µè¦†ç›–ä¿¡æ¯ï¼Œæ”¯æŒé€šè¿‡ `X-User-Role`/`role` è¿‡æ»¤æ¨¡å—å¯è§æ€§ã€‚ã€F:api/site-modules/index.jsâ€ L1-L64ã€‘
- `GET /api/site-modules/{siteId}`ï¼šæŒ‰ç«™ç‚¹åˆå¹¶å…¨å±€/å¹³å°/ç«™ç‚¹çº§é…ç½®å¹¶é™„å¸¦æŒ‡æ ‡å­—æ®µçŸ©é˜µï¼Œå¯ç”¨ `includeGlobal=false` ä»…æŸ¥çœ‹ç«™ç‚¹è‡ªå®šä¹‰éƒ¨åˆ†ã€‚ã€F:api/site-modules/[siteId].jsâ€ L1-L229ã€‘
- `PATCH /api/site-modules/{siteId}`ï¼šä»…é™ `super_admin` è°ƒç”¨ï¼Œç”¨äºæ›´æ–°æ¨¡å—æ’åºã€å¯ç”¨çŠ¶æ€ã€å¯è§è§’è‰²ã€æ•°æ®æºæ ‡è®°åŠè‡ªå®šä¹‰é…ç½®ï¼Œè¿”å›æœ€æ–°åˆå¹¶åçš„é…ç½®ã€‚ã€F:api/site-modules/[siteId].jsâ€ L118-L209ã€‘
- **å¹³å°æ‰©å±•æŒ‡å¼•**ï¼š`site_configs` çš„ `platform` å­—æ®µä¸ºè‡ªç”±æ–‡æœ¬ï¼Œå¯ç›´æ¥ä»¥ `lazada`ã€`shopee` ç­‰å¹³å°ååˆ›å»ºæ–°é…ç½®ï¼›`data_source`/`template_id` å¯å¼•ç”¨ `data_source_templates` ä¸­çš„é¢„è®¾æ˜ å°„ï¼Œå¿…è¦æ—¶é€šè¿‡ `generate_dynamic_table` åˆ›å»ºå¯¹åº”æ—¥è¡¨ç»“æ„ã€‚ã€F:site_configuration_framework.sqlâ€ L1-L118ã€‘

### é€Ÿå–é€š Â· è‡ªè¿è¥ï¼ˆRobot / Poolslabï¼‰
- `GET /api/ae_query`ï¼šæŒ‰ `start`ã€`end`ã€`site`ï¼ˆå¦‚ `ae_self_operated_a`ï¼‰ã€`granularity`ï¼ˆ`day`/`week`/`month`ï¼‰å’Œ `aggregate`ï¼ˆ`time`/`product`ï¼‰èšåˆè‡ªè¿è¥æ˜ç»†ï¼Œè¿”å›æ›å…‰ã€è®¿å®¢ã€åŠ è´­ã€æ”¯ä»˜åŠæ´¾ç”Ÿæ¯”ç‡ã€‚ã€F:api/ae_query/index.jsâ€ L35-L199ã€‘
- `GET /api/ae_self_operated/stats`ï¼šé¢å‘è¿è¥åˆ†æé¡µé¢ï¼Œæ”¯æŒ `site`ã€`from`ã€`to`ã€`limit` å‚æ•°ï¼Œè¿”å›æ—¶é—´åºåˆ—ã€KPI æ±‡æ€»å’Œçƒ­é—¨å•†å“åˆ—è¡¨ã€‚ã€F:api/ae_self_operated/stats/index.jsâ€ L1-L118ã€‘
- `POST /api/ae_upsert[?dry_run=1]`ï¼šæ¥æ”¶ JSON æ•°ç»„æˆ– `{rows:[]}` ç»“æ„ï¼Œä¾æ®å­—æ®µåŒä¹‰è¯æ˜ å°„å…¥åº“ï¼›`dry_run=1` æ—¶ä»…è§£æå¹¶è¿”å›æ ·ä¾‹ï¼Œä¸å†™åº“ã€‚ã€F:api/ae_upsert/index.jsâ€ L1-L120ã€‘

### é€Ÿå–é€š Â· å…¨æ‰˜ç®¡
- `GET /api/stats`ï¼šæŒ‰ `granularity`ï¼ˆ`week`/`month`ï¼‰ä¸å¯é€‰ `product_id`ã€`from`ã€`to`ã€`period_end`ã€`limit`ã€`offset` æŸ¥è¯¢ `managed_stats`ï¼Œè¿”å› KPI æ¦‚è§ˆåŠåˆ†é¡µæ˜ç»†ã€‚ã€F:api/stats/index.jsâ€ L1-L118ã€‘
- `GET /api/managed/daily-totals`ï¼šåŸºäº `from`ã€`to` è®¡ç®—æ¯æ—¥/æ¯å‘¨è®¿å®¢ã€åŠ è´­ã€æ”¯ä»˜æ€»é‡ï¼Œä¼˜å…ˆæ—¥ç²’åº¦ï¼Œè‹¥ç¼ºå¤±è‡ªåŠ¨å›é€€å‘¨ç²’åº¦ã€‚ã€F:api/managed/daily-totals/index.jsâ€ L1-L46ã€‘
- `POST /api/ingest[?dry_run=1]`ï¼šä¸Šä¼ é€Ÿå–é€šå…¨æ‰˜ç®¡ Excelï¼ˆ`file` å­—æ®µï¼‰ï¼Œè‡ªåŠ¨è¯†åˆ«ç»Ÿè®¡å‘¨æœŸï¼ˆå‘¨æ—¥æˆ–æœˆæœ«ï¼‰ï¼Œæ™ºèƒ½åŒ¹é…è¡¨å­—æ®µå¹¶å†™å…¥ `managed_stats`ï¼›`dry_run` æ¨¡å¼ä»…è¿”å›è§£æç»“æœã€‚ã€F:api/ingest/index.jsâ€ L1-L140ã€‘

### ç‹¬ç«‹ç«™ Â· Facebook / Google / TikTok
- `GET /api/independent/stats`ï¼šæ¥å— `site`ã€`channel`ã€`from`ã€`to`ã€`limit` åŠå¯é€‰ `campaign`ã€`network`ã€`device` ç­‰è¿‡æ»¤æ¡ä»¶ï¼Œæ ¹æ®æ¸ é“è‡ªåŠ¨æ˜ å°„æ•°æ®è¡¨å¹¶è¿”å› KPIã€æ—¶é—´åºåˆ—å’Œæ˜ç»†ã€‚ã€F:api/independent/stats/index.jsâ€ L1-L176ã€‘
- `GET /api/independent/sites`ï¼šä»ç»Ÿä¸€çš„ `independent_landing_metrics` è¡¨æå–å·²å­˜åœ¨çš„ç«™ç‚¹åˆ—è¡¨ç”¨äºä¸‹æ‹‰é€‰æ‹©ã€‚ã€F:api/independent/sites/index.jsâ€ L1-L20ã€‘
- `POST /api/independent/ingest`ï¼šç”¨äº Google Ads Landing Pages æŠ¥è¡¨ä¸Šä¼ ï¼Œæ¥æ”¶ `file` å­—æ®µçš„ CSV/XLSXï¼Œè§£æ URLã€æ¸ é“ã€è´¹ç”¨ç­‰å­—æ®µå¹¶å†™å…¥ç»Ÿä¸€è¡¨ï¼Œè‡ªåŠ¨å»é‡ä¸»é”®å†²çªã€‚ã€F:api/independent/ingest/index.jsâ€ L1-L160ã€‘
- `POST /api/independent/facebook-ingest`ï¼šè§£æ Facebook Ads å¯¼å‡ºï¼Œæ‹†åˆ†å•†å“ ID/åç§°å¹¶ç»´æŠ¤ `independent_first_seen` çš„é¦–è´­æ—¶é—´ï¼›åŒæ ·æ”¯æŒè¡¨å­—æ®µæ˜ å°„ä¸æ‰¹é‡ upsertã€‚ã€F:api/independent/facebook-ingest/index.jsâ€ L1-L160ã€‘
- `POST /api/independent/tiktok-ingest`ï¼šå¤„ç† TikTok Ads æŠ¥è¡¨æ–‡ä»¶ï¼Œå…¼å®¹å¤šç§æ—¥æœŸæ ¼å¼å¹¶åŒæ­¥æ›´æ–° `independent_first_seen`ï¼Œä¿æŒå•†å“é¦–è§æ—¶é—´ä¸€è‡´ã€‚ã€F:api/independent/tiktok-ingest/index.jsâ€ L1-L160ã€‘

### äºšé©¬é€Š
- `GET /api/amazon/query`ï¼šåŸºäº `start`ã€`end`ã€`granularity` èšåˆ `amazon_daily_by_asin`ï¼Œè¿”å›ä¼šè¯ã€æµè§ˆã€é”€é‡ã€GMVã€Buy Box å æ¯”ç­‰æŒ‡æ ‡ï¼Œæ”¯æŒæŒ‰ ASIN ä¸æ—¶é—´æ¡¶åˆå¹¶ã€‚ã€F:api/amazon/query/index.jsâ€ L1-L86ã€‘
- `POST /api/amazon/upsert`ï¼šæ¥å— JSON æ•°ç»„æˆ– `{rows:[]}`ï¼ŒæŒ‰ `marketplace_id + asin + stat_date` å»é‡å†™å…¥ï¼Œæ”¯æŒæ‰¹é‡åˆ†å—ä¸Šä¼ ã€‚ã€F:api/amazon/upsert/index.jsâ€ L1-L59ã€‘
- `POST /api/amazon/report-create`ï¼šä»£ç† Amazon SP-API åˆ›å»º `GET_SALES_AND_TRAFFIC_REPORT` æŠ¥è¡¨ï¼Œéœ€ä¼  `dataStartTime`ã€`dataEndTime` å¹¶æ ¡éªŒç›¸å…³ç¯å¢ƒå˜é‡ã€‚ã€F:api/amazon/report-create/index.jsâ€ L1-L97ã€‘
- `GET /api/amazon/report-poll`ï¼šæŸ¥è¯¢æŠ¥è¡¨å¤„ç†çŠ¶æ€ï¼Œè¿”å› `documentId` ç­‰å­—æ®µä¾›åç»­ä¸‹è½½æµç¨‹ä½¿ç”¨ã€‚ã€F:api/amazon/report-poll/index.jsâ€ L1-L84ã€‘

### Ozon
- `GET /api/ozon/stats`ï¼šæ”¯æŒ `date` æˆ– `start`/`end` èŒƒå›´ï¼Œè‡ªåŠ¨æ¢æµ‹å®é™…åˆ—åå¹¶èšåˆ SKU æŒ‡æ ‡ï¼ˆå±•ç¤ºã€è®¿å®¢ã€åŠ è´­ã€ä¸‹å•ç­‰ï¼‰ï¼›è‹¥æœªæŒ‡å®šæ—¥æœŸåˆ™è¿”å›æœ€æ–°æ—¥æœŸåˆ—è¡¨ä¾›é€‰æ‹©ã€‚ã€F:api/ozon/stats/index.jsâ€ L1-L120ã€‘
- `POST /api/ozon/import`ï¼šæ¥æ”¶ `file` å­—æ®µçš„æŠ¥è¡¨ï¼Œæ‰§è¡Œä¿„æ–‡è¡¨å¤´è½¬è›‡å½¢ã€åˆ—é‡æ˜ å°„ä¸å¿…å¡«æ ¡éªŒå upsert åˆ° `ozon_product_report_wide`ï¼Œå¹¶å¤„ç† Schema ç¼“å­˜åˆ·æ–°ã€‚ã€F:api/ozon/import/index.jsâ€ L1-L160ã€‘
- `POST /api/ozon/fetch`ï¼šæºå¸¦ `Client-Id`/`Api-Key` ç›´æ¥è°ƒç”¨ Ozon Analytics API æ‰¹é‡è½åœ°æ›å…‰ã€åŠ è´­ã€è®¢å•ä»¶æ•°ç­‰æŒ‡æ ‡ï¼Œä¸ºè®¢å•ä¸­å¿ƒä¸å¹¿å‘Šä¸­å¿ƒæä¾›ç»Ÿä¸€çš„äº§å“ ID æ•°æ®åº•åº§ã€‚ã€F:api/ozon/fetch/index.jsâ€ L1-L160ã€‘
- `GET /api/ozon/orders`ï¼šæŒ‰ `siteId`ã€`from`ã€`to`ã€`limit` æŸ¥è¯¢ Ozon è®¢å•å¤´ä¸æ˜ç»†ï¼Œå¯é€šè¿‡ `sync=true/false` æ§åˆ¶æ˜¯å¦å®æ—¶è°ƒç”¨ Seller APIï¼ˆ`v3/posting/fbs/fbo/list`ï¼‰å¹¶å†™å…¥ `orders`ã€`order_items` è¡¨ï¼›åŒæ­¥æ‘˜è¦é™„å¸¦ `errors` æ•°ç»„ï¼Œè‹¥ FBO æ¥å£æ— æƒé™æˆ–è¿”å› 404ï¼Œå°†è®°å½•è¯Šæ–­ä¿¡æ¯ä½†ä¸ä¸­æ–­ FBS æ‹‰å–ï¼Œä¾¿äºåœ¨ç”Ÿäº§ç¯å¢ƒæ’æŸ¥å¼‚å¸¸ã€‚é¦–æ¬¡åŒæ­¥ä¼šæ£€æµ‹ `sites` è¡¨æ˜¯å¦å­˜åœ¨ä¼ å…¥çš„ `siteId`ï¼Œè‹¥ç¼ºå¤±åˆ™è‡ªåŠ¨è¯»å– `site_configs` ä¸­çš„åŒåé…ç½®å¹¶è¡¥æ³¨å†Œç«™ç‚¹ä¿¡æ¯ï¼ˆä¾‹å¦‚åœ¨ç«™ç‚¹ç®¡ç†ä¸­åˆ›å»º `ozon_211440331`ï¼Œä¼šè‡ªåŠ¨è½åœ° Ozon æ§åˆ¶å°é‡Œçš„ `Ozon ID 211440331`ï¼‰ï¼›ä»…å½“ä¸¤å¼ è¡¨å‡ç¼ºå¤±æ—¶æ‰è¿”å› 400ï¼Œå¹¶é™„å¸¦ç¼ºå¤±åˆ—è¡¨ä»¥æé†’è¡¥å……é…ç½®ã€‚ã€F:api/ozon/orders/index.jsâ€ L1-L133ã€‘ã€F:lib/ozon-orders.jsâ€ L386-L544ã€‘

### Lazada OAuth
- `GET /api/lazada/oauth/callback`ï¼šä½œä¸º Lazada æˆæƒå›è°ƒï¼Œæ¥å— `code`ã€`state` æˆ– `error` æŸ¥è¯¢å‚æ•°ï¼Œä½¿ç”¨ `LAZADA_APP_KEY/LAZADA_APP_SECRET/LAZADA_REDIRECT_URI` è®¡ç®—ç­¾åå¹¶å‘ Lazada æˆæƒæœåŠ¡å™¨æ¢å–è®¿é—®ä»¤ç‰Œï¼›æˆåŠŸåè¿”å› `{ tokens, state }`ï¼Œä¾›ç®¡ç†åå°å†™å…¥å®‰å…¨å­˜å‚¨ã€‚ã€F:api/lazada/oauth/callback.jsâ€ L1-L149ã€‘

### æ¨¡å—é…ç½®ä¸æƒé™ï¼ˆè§„åˆ’ä¸­ï¼‰
- `/api/site-modules` ç³»åˆ—æ¥å£å·²ä¸Šçº¿ï¼Œå¯æŒ‰ç«™ç‚¹è¯»å–æˆ–æ›´æ–°æ¨¡å—é¡ºåºã€å¯è§è§’è‰²ä¸å­—æ®µè¦†ç›–ï¼›è¯·æ±‚éœ€æºå¸¦ `X-User-Role` å¤´ä»¥æŒ‰è§’è‰²è¿‡æ»¤è¿”å›ç»“æœï¼Œè§„åˆ™è¯¦è§ `rules.json`ã€‚ã€F:specs/openapi.yamlâ€ L576-L653ã€‘ã€F:rules.jsonâ€ L8-L76ã€‘ã€F:api/site-modules/[siteId].jsâ€ L1-L229ã€‘

## ç¯å¢ƒé…ç½®
- **Lazada**ï¼šåœ¨ Vercel ç¯å¢ƒå˜é‡ä¸­é…ç½® `LAZADA_APP_KEY`ã€`LAZADA_APP_SECRET`ã€`LAZADA_REDIRECT_URI`ï¼Œå…¶ä¸­å›è°ƒåœ°å€åº”è®¾ç½®ä¸º `https://aliexpress-analytics.vercel.app/api/lazada/oauth/callback` å¹¶ä¸ Lazada æ§åˆ¶å°ä¿æŒä¸€è‡´ï¼Œæˆæƒè¿”å›çš„ä»¤ç‰Œéœ€å†™å…¥å®‰å…¨å­˜å‚¨ï¼Œä¸åº”ä¿å­˜åœ¨å‰ç«¯ã€‚ã€F:api/lazada/oauth/callback.jsâ€ L1-L149ã€‘
- **Ozon**ï¼šé…ç½® `OZON_CLIENT_ID` ä¸ `OZON_API_KEY` ä¾› `/api/ozon/fetch` ä¸ `/api/ozon/orders` ä½¿ç”¨ï¼Œå¹¶åœ¨ Serverless ç¯å¢ƒä¸­æä¾› `SUPABASE_URL`ã€`SUPABASE_SERVICE_ROLE_KEY` ä»¥å†™å…¥ `orders`/`order_items`ï¼›å¦‚éœ€è‡ªå®šä¹‰å®½è¡¨å¯ç»§ç»­ä½¿ç”¨ `OZON_TABLE_NAME`ã€‚ã€F:api/ozon/orders/index.jsâ€ L1-L117ã€‘ã€F:api/ozon/fetch/index.jsâ€ L1-L160ã€‘

## é¡¹ç›®çŸ¥è¯†åº“ä¸çº¦æŸ
- `docs/platform-architecture.md`ï¼šå…¨ç«™æ¶æ„è“å›¾ï¼Œæè¿°ç«™ç‚¹çŸ©é˜µã€æ¨¡å—èŒè´£ã€æ•°æ®æµä¸æ‰§è¡Œå»ºè®®ã€‚ã€F:docs/platform-architecture.mdâ€ L1-L162ã€‘
- `rules.json`ï¼šçº¦æŸç«™ç‚¹å‘½åã€æ¨¡å—èŒƒå›´ã€API çº¦å®šã€æƒé™è§’è‰²åŠæ–‡æ¡£åŒæ­¥è¦æ±‚ï¼Œæ˜¯ä»£ç å®¡æŸ¥çš„ç¡¬æ€§è§„èŒƒã€‚ã€F:rules.jsonâ€ L1-L76ã€‘
- `roadmap.yaml`ï¼šè§„åˆ’ v1/v2/v3 çš„é‡ç‚¹äº¤ä»˜ã€æŒ‡æ ‡ã€é£é™©ä¸ç¼“è§£ç­–ç•¥ï¼ŒæŒ‡å¯¼å¤šæ¨¡å—å¹¶è¡Œå®æ–½ã€‚ã€F:roadmap.yamlâ€ L1-L63ã€‘
- `specs/`ï¼šåŒ…å« `openapi.yaml`ã€`data-model.sql`ã€`metrics_dictionary.md` ä¸‰å¤§è§„æ ¼æ–‡ä»¶ï¼Œç»Ÿä¸€æ¥å£ã€æ•°æ®ç»“æ„ä¸æŒ‡æ ‡å£å¾„ã€‚ã€F:specs/README.mdâ€ L1-L6ã€‘ã€F:specs/openapi.yamlâ€ L1-L1454ã€‘ã€F:specs/data-model.sqlâ€ L1-L308ã€‘ã€F:specs/metrics_dictionary.mdâ€ L1-L40ã€‘

---

## Facebook Ads ä¼˜åŒ–è®°å½• (2025-01-07)

### ğŸ¯ ä¼˜åŒ–ç›®æ ‡
è§£å†³ Facebook Ads æ•°æ®æ˜¾ç¤ºé—®é¢˜ï¼Œå®ç°å•†å“IDå’Œå•†å“åçš„åˆ†ç¦»æ˜¾ç¤ºï¼ŒåŒæ—¶ç¡®ä¿ä¸å½±å“ç°æœ‰ `poolsvacuum` ç«™ç‚¹çš„åŠŸèƒ½ã€‚

### ğŸ”§ æ ¸å¿ƒä¼˜åŒ–å†…å®¹

#### 1. æ•°æ®åº“ç»“æ„ä¼˜åŒ–
- **æ–°å¢å­—æ®µ**ï¼šä¸º `independent_facebook_ads_daily` è¡¨æ·»åŠ  `product_name` å­—æ®µ
- **æ•°æ®æ ¼å¼ç»Ÿä¸€**ï¼šä¿®å¤ `independent_first_seen` è¡¨ä½¿ç”¨çº¯æ•°å­—å•†å“IDä½œä¸ºå”¯ä¸€æ ‡è¯†
- **å­—æ®µæ˜ å°„**ï¼š
  ```sql
  -- æ–°å¢å­—æ®µ
  ALTER TABLE public.independent_facebook_ads_daily 
  ADD COLUMN IF NOT EXISTS product_name TEXT;
  
  -- ä¿®å¤first_seenè¡¨æ•°æ®æ ¼å¼
  UPDATE independent_first_seen 
  SET product_identifier = TRIM(SPLIT_PART(product_identifier, ',', 1))
  WHERE product_identifier LIKE '%,%' 
    AND TRIM(SPLIT_PART(product_identifier, ',', 1)) ~ '^\d{10,}$';
  ```

#### 2. åç«¯APIä¼˜åŒ–
- **æ•°æ®ä¸Šä¼ é€»è¾‘**ï¼šè‡ªåŠ¨æ‹†åˆ† `product_identifier` ä¸º `product_id` å’Œ `product_name`
  ```javascript
  // æ‹†åˆ†é€»è¾‘ç¤ºä¾‹
  if (firstColumn.includes(',')) {
    const parts = firstColumn.split(',');
    productId = parts[0].trim();        // "50073860800824"
    productName = parts.slice(1).join(',').trim(); // "XREAL One AR Glasses..."
  }
  ```
- **å•†å“æ ‡è¯†æå–**ï¼šä¼˜åŒ– `extractProductId` å‡½æ•°ï¼Œä¼˜å…ˆä½¿ç”¨ `product_id` å­—æ®µ
- **äº§å“èšåˆé€»è¾‘**ï¼šæ”¯æŒå•†å“IDå’Œå•†å“ååˆ†ç¦»å­˜å‚¨å’ŒæŸ¥è¯¢
- **first_seenè¡¨æ›´æ–°**ï¼šç¡®ä¿ä½¿ç”¨çº¯æ•°å­—å•†å“IDä½œä¸ºå”¯ä¸€æ ‡è¯†

#### 3. å‰ç«¯æ˜¾ç¤ºä¼˜åŒ–
- **åˆ—å®šä¹‰æ›´æ–°**ï¼šFacebook Adsè¡¨æ ¼æ–°å¢å•†å“IDå’Œå•†å“ååˆ—
  ```javascript
  // æ–°å¢åˆ—å®šä¹‰
  { data: 'product_id', title: 'å•†å“ID', width: '120px' },
  { data: 'product_name', title: 'å•†å“åç§°', width: '200px' }
  ```
- **é”™è¯¯å¤„ç†å¢å¼º**ï¼šDataTablesåˆå§‹åŒ–å¤±è´¥æ—¶æ˜¾ç¤ºè¯¦ç»†é”™è¯¯ä¿¡æ¯
- **è°ƒè¯•ä¿¡æ¯ä¼˜åŒ–**ï¼šæ·»åŠ è¯¦ç»†çš„æ§åˆ¶å°è¾“å‡ºå¸®åŠ©å®šä½é—®é¢˜
- **è¡¨æ ¼æ¸²æŸ“ä¼˜åŒ–**ï¼šç¡®ä¿è¡¨æ ¼å…ƒç´ æ­£ç¡®åˆ›å»ºå’Œåˆå§‹åŒ–

#### 4. å…¼å®¹æ€§ä¿è¯
- **poolsvacuumç«™ç‚¹ä¿æŠ¤**ï¼šæ‰€æœ‰ä¼˜åŒ–éƒ½ç¡®ä¿ä¸å½±å“ç°æœ‰Google Adsæ•°æ®å±•ç¤º
- **å‘åå…¼å®¹**ï¼šä¿ç•™åŸæœ‰çš„ `product` å­—æ®µç”¨äºå…¼å®¹æ€§
- **æ¸ é“éš”ç¦»**ï¼šFacebook Adså’ŒGoogle Adsä½¿ç”¨ä¸åŒçš„æ•°æ®å¤„ç†é€»è¾‘

### ğŸ“ ç›¸å…³æ–‡ä»¶
- `api/independent/facebook-ingest/index.js` - Facebook Adsæ•°æ®ä¸Šä¼ é€»è¾‘
- `api/independent/stats/index.js` - æ•°æ®æŸ¥è¯¢å’Œèšåˆé€»è¾‘
- `public/independent-site.html` - å‰ç«¯è¡¨æ ¼æ˜¾ç¤ºé€»è¾‘
- `add_product_name_column.sql` - æ•°æ®åº“å­—æ®µæ·»åŠ è„šæœ¬
- `fix_independent_first_seen_table.sql` - first_seenè¡¨ä¿®å¤è„šæœ¬

### ğŸš€ éƒ¨ç½²è®°å½•
- **åˆ†æ”¯**ï¼š`feature/facebook-ads-complete-fields`
- **æäº¤è®°å½•**ï¼š
  - ä¿®å¤independent_first_seenè¡¨ç»“æ„ä¸ä¸€è‡´é—®é¢˜
  - ä¿®å¤Facebook Adså•†å“IDå’Œå•†å“åå¤„ç†é€»è¾‘
  - ç›´æ¥åº”ç”¨Facebook Adsæ˜¾ç¤ºä¼˜åŒ–
- **æµ‹è¯•çŠ¶æ€**ï¼šå·²éƒ¨ç½²åˆ°Vercelï¼Œç­‰å¾…åŠŸèƒ½éªŒè¯

### ğŸ” æ•…éšœæ’é™¤
å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. æµè§ˆå™¨æ§åˆ¶å°çš„è¯¦ç»†é”™è¯¯ä¿¡æ¯
2. ç½‘ç»œè¯·æ±‚æ˜¯å¦æˆåŠŸè¿”å›æ•°æ®
3. æ•°æ®åº“ä¸­çš„æ•°æ®æ ¼å¼æ˜¯å¦æ­£ç¡®
4. å‰ç«¯åˆ—å®šä¹‰ä¸åç«¯æ•°æ®å­—æ®µæ˜¯å¦åŒ¹é…

---

## TailAdmin UI ä¼˜åŒ–æ–½å·¥æŒ‡ä»¤

## ç›®æ ‡
- ä»¥ **TailAdmin React/Tailwind æ¨¡æ¿** ä¸ºè§†è§‰ä¸å¸ƒå±€è§„èŒƒï¼Œä¼˜åŒ–æœ¬ç«™æ¶æ„ä¸ UIï¼Œä½† **ä¸æ”¹å˜ç°æœ‰æ•°æ®ç»“æ„ä¸æ¥å£**ã€‚
- é‡‡ç”¨ **æ¸è¿›å¼é‡æ„**ï¼š
  - å…ˆåœ¨ç°æœ‰ HTML é¡µé‡Œæ›¿æ¢å¯¼èˆª / å¤´éƒ¨ / å¡ç‰‡æ ·å¼ä¸æ …æ ¼ï¼ˆå¤–è§‚å£³ï¼‰
  - ä¿æŒæ‰€æœ‰æ•°æ® DOM/ID ä¸ JS åˆå§‹åŒ–é€»è¾‘ä¸å˜
  - å¯é€‰å†æ–°å¢ä¸€ä¸ª `/admin` React ä»ªè¡¨ç›˜åŒº

---

## ç°çŠ¶ä¸çº¦æŸï¼ˆå¿…é¡»éµå®ˆï¼‰
1. **éƒ¨ç½²ç»“æ„**
   - å¹³å°ï¼šVercel é™æ€ + Serverless
   - é™æ€æ–‡ä»¶ï¼š`/public/**`
   - APIï¼š`/api/**` Node å‡½æ•°
   - è·¯ç”±è§„åˆ™è§ `vercel.json`

2. **éœ€è¦ä¼˜åŒ–çš„é¡µé¢**ï¼ˆåªæ¢ UI å£³ï¼Œä¸æ”¹æ•°æ® DOM/IDï¼‰
   - `/public/index.html`ï¼ˆå…¨æ‰˜ç®¡é¡µé¢ï¼‰
   - `/public/self-operated.html`ï¼ˆè‡ªè¿è¥é¡µé¢ï¼‰

3. **ç»Ÿä¸€ä¸»é¢˜**
   - ä½¿ç”¨ `assets/theme.css`ï¼ˆä»¥ `theme_unified_0811b.css` ä¸ºå‡†ï¼‰
   - æ·±è‰²ä¾§è¾¹æ  + æµ…è‰²å†…å®¹åŒº
   - é«˜å¯¹æ¯” DataTablesã€åˆ†æ®µ Tabs æ ·å¼
   - `.kpi` å•è¡Œå¡ç‰‡ï¼ˆè‡ªè¿è¥é¡µï¼‰å¸ƒå±€ä¿æŒä¸å˜

4. **æ¥å£åˆåŒä¸å¯æ›´æ”¹**
   - `/api/ae_upsert`ï¼ˆ`product_id, stat_date` å»é‡ï¼‰
   - `/api/stats`ã€`/api/ingest` ç­‰æŸ¥è¯¢/ä¸Šä¼  API ä¿æŒå‚æ•°ä¸è¿”å›ç»“æ„ä¸å˜

### é¡µé¢è·¯ç”±ç»“æ„
- è‡ªè¿è¥ï¼š`/self-operated.html#analysis`ã€`/self-operated.html#products`
- å…¨æ‰˜ç®¡ï¼š`/managed.html#analysis`ã€`/managed.html#products`
- ç‹¬ç«‹ç«™ï¼š`/independent-site.html?site=<name>#analysis`ã€`/independent-site.html?site=<name>#products`
  - æ—§çš„ `operation-analysis.html` ä¸ `product-analysis.html` é¡µé¢å·²åˆ é™¤
  - æ‰€æœ‰ç«™ç‚¹çš„è¿è¥åˆ†æä¸äº§å“åˆ†æé¡µåœ¨æ— ç”¨æˆ·é€‰æ‹©æ—¶é»˜è®¤å±•ç¤ºæœ€è¿‘ 7 å¤©çš„æ•°æ®èŒƒå›´
- è‡ªè¿è¥è¿è¥åˆ†æé¡µä»…å±•ç¤ºè®¿å®¢æ¯”ã€åŠ è´­æ¯”ã€æ”¯ä»˜æ¯”ï¼Œå¹¶é™„å¸¦ä¸Šä¸€å‘¨æœŸè¶‹åŠ¿å¯¹æ¯”
- è‡ªè¿è¥äº§å“åˆ†æé¡µçš„æ›å…‰ã€è®¿å®¢ã€åŠ è´­ä¸æ”¯ä»˜è¶‹åŠ¿ä»¥äº§å“é¦–æ¬¡ä¸Šæ¶æ—¥æœŸä¸ºèµ·ç‚¹æŒ‰å‘¨ç»˜åˆ¶ï¼Œå¹¶å¯¹ç¼ºå¤±å‘¨è‡ªåŠ¨è¡¥é›¶
- å…¨æ‰˜ç®¡äº§å“åˆ†æé¡µä»å•†å“ä¸Šæ¶å‘¨èµ·å±•ç¤ºæ›å…‰ã€è®¿å®¢ã€åŠ è´­ä¸æ”¯ä»˜çš„å‘¨è¶‹åŠ¿ï¼Œå¹¶æä¾›å¹³å‡è®¿å®¢æ¯”ã€å¹³å‡åŠ è´­æ¯”ã€å¹³å‡æ”¯ä»˜æ¯”åŠæ€»æ›å…‰/è®¿å®¢/åŠ è´­/æ”¯ä»˜ä¹°å®¶æ•°ç­‰ KPI å¡ç‰‡ï¼Œå«ä¸Šä¸€å‘¨æœŸå¯¹æ¯”ä¸ç«™ç‚¹å æ¯”
- å…¨æ‰˜ç®¡è¿è¥åˆ†æé¡µæä¾›è¿‡å»ä¸‰ä¸ªæœˆè®¿å®¢æ€»æ•°ã€åŠ è´­æ€»æ•°ã€æ”¯ä»˜æ€»æ•°ä¸‰æ¡ç‹¬ç«‹æ›²çº¿
- å…¨æ‰˜ç®¡äº§å“åˆ†æé¡µåœ¨å•†å“é€‰æ‹©è¡Œæä¾›ä¸æ•°æ®æ˜ç»†é¡µä¸€è‡´çš„å‘¨æœ«æ—¥æ—¶é—´æ§ä»¶ï¼Œå¹¶åœ¨è¯¥è§†å›¾ä¸‹éšè—é¡¶éƒ¨ä¸Šä¼ ä¸å‘¨æœŸæ 
- è‡ªè¿è¥ä¸å…¨æ‰˜ç®¡æ•°æ®æ˜ç»†é¡µæ–°å¢"æ›å…‰å•†å“æ•°"KPIï¼Œç»Ÿè®¡å½“å‰å‘¨æœŸå†…æ›å…‰é‡å¤§äº 0 çš„å•†å“æ•°é‡å¹¶ä¸ä¸Šå‘¨æœŸå¯¹æ¯”
- ç‹¬ç«‹ç«™è¿è¥åˆ†æé¡µå±•ç¤ºå¹³å‡ç‚¹å‡»ç‡ã€å¹³å‡è½¬åŒ–ç‡ã€æ›å…‰/ç‚¹å‡»/è½¬åŒ–å•†å“æ€»æ•°åŠæœ¬å‘¨æœŸæ–°å“æ•°ç­‰ KPI
  - ç‹¬ç«‹ç«™äº§å“åˆ†æä»¥ landing page ä½œä¸ºäº§å“ç»´åº¦ï¼Œé»˜è®¤å±•ç¤ºæœ¬å‘¨æœŸæ›å…‰é‡æœ€é«˜çš„äº§å“ï¼Œé€‰ä¸­åæ˜¾ç¤ºæ›å…‰ã€ç‚¹å‡»ã€è½¬åŒ–æ€»æ•°ä¸ CTR KPI ä»¥åŠå¯¹åº”é“¾æ¥å’Œé¦–æ¬¡ä¸Šæ¶æ—¥æœŸ
  - è¿è¥åˆ†æä¸äº§å“åˆ†ææ¨¡å—å„è‡ªæä¾›é¡¶éƒ¨æ—¶é—´æ§ä»¶ï¼ŒåŸå…ˆé¡µé¢é¡¶éƒ¨çš„æ—¥æœŸä¸ä¸Šä¼ æ å·²ç§»é™¤
  - æ•°æ®æ˜ç»†è¡¨ä¸­åŒå‡»äº§å“è¡Œå¯ç›´æ¥è·³è½¬åˆ°è¯¥äº§å“çš„åˆ†æé¡µ
  - äº§å“ä¸Šæ¶æ—¥æœŸä¸æ–°å“ç»Ÿè®¡æ¥æºäº `independent_first_seen` è¡¨ï¼Œå¹¶æ®æ­¤è®¡ç®—ç«™ç‚¹ç´¯è®¡äº§å“æ€»æ•°

---

## æ¨¡æ¿å‚è€ƒï¼ˆæ–°å¢è¯´æ˜ï¼‰
- **æ–‡ä»¶è·¯å¾„**ï¼š`/_design/tailadmin-react---tailwind-react-dashboard-template.zip`
- **ä½¿ç”¨èŒƒå›´**ï¼šå¯¼èˆªå¸ƒå±€ã€å¡ç‰‡æ ·å¼ã€é¢æ¿ã€è¡¨æ ¼å®¹å™¨ç­‰ UI ç»“æ„
- **å¥—ç”¨è¦æ±‚**ï¼š
  - ä»…æ›¿æ¢å¤–è§‚å£³ä¸æ ·å¼ç±»
  - ä¿ç•™ç°æœ‰æ•°æ® DOM ç»“æ„ã€ID å’Œå‰ç«¯ JS åˆå§‹åŒ–é€»è¾‘ï¼ˆDataTablesã€ECharts ç­‰ï¼‰
  - æ¨¡æ¿ä¸­çš„ç»„ä»¶å‘½åã€Tailwind ç±»åå¯æŒ‰éœ€è°ƒæ•´ï¼Œä½†ä¸å¾—å½±å“åŸåŠŸèƒ½

---

## ä»»åŠ¡æ¸…å•
### A. æ¥å…¥ TailAdmin å¤–è§‚å£³
1. ä»æ¨¡æ¿ä¸­æå–å¯¼èˆªã€å¤´éƒ¨ã€å¡ç‰‡ã€é¢æ¿ã€è¡¨æ ¼å®¹å™¨ç»“æ„ï¼Œåº”ç”¨åˆ° `index.html` ä¸ `self-operated.html`
2. ä¸æ”¹åŠ¨ä»¥ä¸‹ DOM/IDï¼š
   - DataTables å®¹å™¨ï¼š`#report`
   - ECharts å®¹å™¨ï¼š`#funnel`, `#sumCompareBar`, `#vrBar`, `#payBar` ç­‰
   - è‡ªè¿è¥ `.kpi .card` å¸ƒå±€ï¼ˆå•è¡Œæ¨ªå‘æ»šåŠ¨ï¼‰
3. `assets/theme.css` å¿…é¡»åœ¨æ‰€æœ‰ç¬¬ä¸‰æ–¹ CSS ä¹‹ååŠ è½½
4. ä¿ç•™ç°æœ‰ä¾§è¾¹æ å¯¼èˆªç»“æ„ä¸å±•å¼€/é«˜äº®é€»è¾‘

### B. å¯é€‰ï¼šæ–°å¢ React `/admin` ä»ªè¡¨ç›˜
1. åœ¨ä»“åº“æ ¹ç›®å½•æ–°å¢ `ui-dashboard/`ï¼Œç”¨ Vite/Next åˆå§‹åŒ– TailAdmin
2. æ„å»ºäº§ç‰©è¾“å‡ºåˆ° `/public/admin/**`ï¼ˆé™æ€æ‰˜ç®¡ï¼‰
3. `/admin` é¡µé¢è°ƒç”¨ç°æœ‰ `/api/**` æ¥å£ï¼Œä¸æ”¹å‚æ•°ä¸è¿”å›

---

## äº¤ä»˜è¦æ±‚
- ä»£ç æäº¤åˆ°åˆ†æ”¯ `feature/tailadmin-skin`
- `/public/index.html` ä¸ `/public/self-operated.html` æœ¬åœ°å¯ç›´æ¥æ‰“å¼€éªŒè¯
- ä¸»é¢˜ç»Ÿä¸€ï¼šæ·±è‰²ä¾§è¾¹æ  + ç™½è‰²å†…å®¹åŒº
- è‡ªè¿è¥ `.kpi` ä¿æŒå•è¡Œå¡ç‰‡å¸ƒå±€ï¼Œçª„å±æ¨ªå‘æ»‘åŠ¨
- æ‰€æœ‰ä¸Šä¼ ã€æŸ¥è¯¢ã€æ¸²æŸ“åŠŸèƒ½ä¸ä¸Šçº¿å‰ä¸€è‡´

- ## æŠ€æœ¯æ¶æ„

### ğŸ—ï¸ ç³»ç»Ÿæ¶æ„
- **å‰ç«¯**ï¼šHTML + JavaScript + DataTables + ECharts
- **åç«¯**ï¼šVercel Serverless Functions (Node.js)
- **æ•°æ®åº“**ï¼šSupabase (PostgreSQL)
- **éƒ¨ç½²**ï¼šVercel é™æ€æ‰˜ç®¡ + API è·¯ç”±

### ğŸ“ é¡¹ç›®ç»“æ„
```
â”œâ”€â”€ public/                 # é™æ€æ–‡ä»¶
â”‚   â”œâ”€â”€ index.html         # å…¨æ‰˜ç®¡é¡µé¢
â”‚   â”œâ”€â”€ self-operated.html # è‡ªè¿è¥é¡µé¢
â”‚   â”œâ”€â”€ independent-site.html # ç‹¬ç«‹ç«™é¡µé¢
â”‚   â””â”€â”€ assets/            # æ ·å¼å’Œè„šæœ¬
â”œâ”€â”€ api/                   # Serverless API
â”‚   â”œâ”€â”€ independent/       # ç‹¬ç«‹ç«™ç›¸å…³API
â”‚   â”‚   â”œâ”€â”€ facebook-ingest/ # Facebook Adsä¸Šä¼ 
â”‚   â”‚   â”œâ”€â”€ tiktok-ingest/   # TikTok Adsä¸Šä¼ 
â”‚   â”‚   â”œâ”€â”€ ingest/          # Google Adsä¸Šä¼ 
â”‚   â”‚   â””â”€â”€ stats/           # æ•°æ®æŸ¥è¯¢
â”‚   â””â”€â”€ ...
â””â”€â”€ vercel.json           # Vercelé…ç½®
```

### ğŸ—„ï¸ æ•°æ®åº“è®¾è®¡

#### ç»Ÿä¸€è¡¨æ¶æ„
- **`independent_facebook_ads_daily`**ï¼šFacebook Adsæ•°æ®
- **`independent_tiktok_ads_daily`**ï¼šTikTok Adsæ•°æ®
- **`independent_landing_metrics`**ï¼šGoogle Adsæ•°æ®
- **`site_channel_configs`**ï¼šç«™ç‚¹æ¸ é“é…ç½®

#### å…³é”®å­—æ®µ
```sql
-- ç»Ÿä¸€å­—æ®µ
site, day, campaign_name, impressions, clicks, spend_usd, conversions

-- Facebook Adsç‰¹æœ‰
adset_name, reach, frequency, cpm, cpc_all, all_ctr, product_id, product_name

-- TikTok Adsç‰¹æœ‰  
adgroup_name, ctr, cpc, conversion_value

-- Google Adsç‰¹æœ‰
network, device, landing_path, landing_url
```

### ğŸ”§ ç¯å¢ƒé…ç½®
```bash
# Supabaseé…ç½®
SUPABASE_URL=your_supabase_url
SUPABASE_ANON_KEY=your_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key

# å…¶ä»–é…ç½®
TEMP=/tmp  # ä¸´æ—¶æ–‡ä»¶ç›®å½•
```

## éƒ¨ç½²è¯´æ˜

### ğŸš€ Verceléƒ¨ç½²
1. è¿æ¥GitHubä»“åº“åˆ°Vercel
2. é…ç½®ç¯å¢ƒå˜é‡
3. è‡ªåŠ¨éƒ¨ç½²å®Œæˆ

### ğŸ“Š æ•°æ®åº“åˆå§‹åŒ–
```sql
-- åˆ›å»ºç«™ç‚¹æ¸ é“é…ç½®è¡¨
CREATE TABLE public.site_channel_configs (
  id SERIAL PRIMARY KEY,
  site_id TEXT NOT NULL,
  site_name TEXT NOT NULL,
  channel TEXT NOT NULL,
  table_name TEXT NOT NULL,
  is_enabled BOOLEAN DEFAULT true,
  created_at TIMESTAMP DEFAULT NOW(),
  UNIQUE(site_id, channel)
);

CREATE INDEX IF NOT EXISTS idx_site_channel_configs_site ON public.site_channel_configs(site_id);
CREATE INDEX IF NOT EXISTS idx_site_channel_configs_channel ON public.site_channel_configs(channel);

-- æ’å…¥é»˜è®¤é…ç½®
INSERT INTO public.site_channel_configs (site_id, site_name, channel, table_name, is_enabled) VALUES
('independent_poolsvacuum', 'poolsvacuum.com', 'google_ads', 'independent_landing_metrics', true),
('independent_icyberite', 'icyberite.com', 'facebook_ads', 'independent_facebook_ads_daily', true);
```

## ä½¿ç”¨æŒ‡å—

### ğŸ“¤ æ•°æ®ä¸Šä¼ 
1. é€‰æ‹©å¯¹åº”ç«™ç‚¹
2. æ ¹æ®æ¸ é“é€‰æ‹©ä¸Šä¼ APIï¼š
   - Google Ads â†’ `/api/independent/ingest`
   - Facebook Ads â†’ `/api/independent/facebook-ingest`
   - TikTok Ads â†’ `/api/independent/tiktok-ingest`
3. ä¸Šä¼ Excel/CSVæ–‡ä»¶

### ğŸ“ˆ æ•°æ®åˆ†æ
1. **æ•°æ®æ˜ç»†**ï¼šæŸ¥çœ‹åŸå§‹æ•°æ®ï¼Œæ”¯æŒå¤šç»´åº¦ç­›é€‰
2. **è¿è¥åˆ†æ**ï¼šKPIå¯¹æ¯”å’Œè¶‹åŠ¿åˆ†æ
3. **äº§å“åˆ†æ**ï¼šäº§å“è¡¨ç°å’Œè½¬åŒ–åˆ†æ

### ğŸ” æ¸ é“ç­›é€‰
- ä½¿ç”¨æ¸ é“é€‰æ‹©å™¨ç­›é€‰ç‰¹å®šå¹¿å‘Šå¹³å°æ•°æ®
- æ”¯æŒå¤šæ¸ é“æ•°æ®å¯¹æ¯”åˆ†æ
- è‡ªåŠ¨èšåˆä¸åŒæ¸ é“çš„KPIæŒ‡æ ‡

---

## è´¡çŒ® & åé¦ˆ

- ğŸ [æŠ¥å‘Š Bug](https://github.com/liuxuedata/aliexpress-analytics/issues/new?template=bug_report.md)
- âœ¨ [æå‡ºåŠŸèƒ½](https://github.com/liuxuedata/aliexpress-analytics/issues/new?template=feature_request.md)
- ğŸ›’ [ç”³è¯·æ¥å…¥ Amazon](https://github.com/liuxuedata/aliexpress-analytics/issues/new?template=amazon_onboarding.md)
- ğŸ”€ [å‘èµ· Pull Request](https://github.com/liuxuedata/aliexpress-analytics/compare)

> æäº¤ PR æ—¶è¯·éµå¾ª [.github/pull_request_template.md](.github/pull_request_template.md)

## æ›´æ–°æ—¥å¿—

### v2.1.0 (2025-01-07)
- âœ¨ Facebook Adså•†å“IDå’Œå•†å“ååˆ†ç¦»æ˜¾ç¤º
- ğŸ”§ ä¼˜åŒ–æ•°æ®ä¸Šä¼ é€»è¾‘ï¼Œè‡ªåŠ¨æ‹†åˆ†product_identifier
- ğŸ›¡ï¸ å¢å¼ºé”™è¯¯å¤„ç†å’Œè°ƒè¯•ä¿¡æ¯
- ğŸ”’ ç¡®ä¿poolsvacuumç«™ç‚¹åŠŸèƒ½ä¸å—å½±å“
- ğŸ“š å®Œå–„Facebook Adsä¼˜åŒ–æ–‡æ¡£

### v2.0.0 (2025-01-06)
- âœ¨ æ–°å¢å¤šæ¸ é“æ¶æ„æ”¯æŒ
- âœ¨ æ”¯æŒGoogle Adsã€Facebook Adsã€TikTok Ads
- âœ¨ ç»Ÿä¸€æ•°æ®è¡¨è®¾è®¡
- âœ¨ ç«™ç‚¹æ¸ é“é…ç½®ç®¡ç†
- ğŸ”§ ä¿æŒå‘åå…¼å®¹æ€§
- ğŸ“š å®Œå–„æŠ€æœ¯æ–‡æ¡£