
:root { --bg:#0b1220; --panel:#0b1a3b; --brand:#1e40af; --blue:#2563EB; --orange:#F97316; --text:#E5E7EB; --muted:#94a3b8; --kpi-card-scale:0.9; --kpi-font-scale:0.85 }
*{box-sizing:border-box}html,body{height:100%}body{margin:0;background:var(--bg);color:var(--text);font-family:Arial,Helvetica,sans-serif}
.sidebar{width:220px;background:#0f172a;color:#fff;padding:16px;border-right:1px solid #1f2937;position:sticky;top:0;z-index:1000}
.sidebar h3{margin:0 0 10px;font-size:16px}.sidebar ul{list-style:none;padding-left:0;margin:0}.sidebar li{margin-bottom:10px}
.sidebar a{display:block;text-decoration:none;color:#94a3b8;font-size:14px;padding:6px 8px;border-radius:6px}
.sidebar a:hover{color:#fff;background:#0b1a3b}.sidebar .submenu{list-style:none;padding-left:14px;display:none}
.sidebar .has-submenu>a{cursor:pointer}.sidebar .has-submenu.open>.submenu{display:block}.sidebar .submenu a.active{color:#fff;background:var(--brand)}
.container{display:flex;height:100vh}.main{flex:1;display:flex;flex-direction:column;overflow:hidden}.content{flex:1;overflow:auto}.content-pad{padding:14px 16px}.divider{height:1px;background:#1f2937;margin:8px 0 12px}
#report_wrapper{background:var(--panel);border-radius:12px;padding:8px}table.dataTable thead th{color:#93c5fd}
table.dataTable thead th.sorting_asc,table.dataTable thead th.sorting_desc{color:#fff!important;background:#1f2937!important}
table.dataTable tbody td,table.dataTable thead th{border-color:#172554!important;color:#e5e7eb}.fixedHeader-floating,.fixedHeader-floating th{background:#0b1220!important}
#report a,#report a:visited{color:#60a5fa;background:transparent!important;text-decoration:none;font-weight:700}#report a:hover{color:#93c5fd;text-decoration:underline}
#report.dataTable tbody td:first-child,.DTFC_Cloned tbody td{background-color:#1e3a8a!important;color:#fff!important;font-weight:800;border-color:#1f2a5f!important}
#report thead th:first-child{background-color:#1f2a5f!important;color:#fff!important;font-weight:800}#report.dataTable tbody tr:hover td:first-child,.DTFC_Cloned tbody tr:hover td{background-color:#1e40af!important;color:#fff!important}
/* Full-managed scoped rules */
.fm .upload-section{background:var(--bg);color:#fff;padding:12px 16px;border-bottom:1px solid #1f2937}
.fm .upload-top{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:10px}
.fm .controls{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
.fm .upload-btn{background:#00b488;color:#001;padding:8px 16px;border:0;border-radius:24px;font-size:14px;font-weight:700;cursor:pointer}
.fm .btn{background:var(--blue);color:#fff;padding:8px 12px;border:0;border-radius:8px;cursor:pointer}
.fm .sel,.fm .date-filter,.fm .num{color:#0b1220;background:#fff;padding:7px 8px;font-size:14px;border-radius:8px;border:1px solid #334155}
.fm .notice{font-size:12px;color:var(--muted)}
.fm .stats-cards{display:flex;gap:16px;flex-wrap:wrap}
.fm .stat-card{background:var(--panel);border-radius:calc(12px * var(--kpi-card-scale, 0.9));padding:calc(14px * var(--kpi-card-scale, 0.9));min-width:calc(220px * var(--kpi-card-scale, 0.9));flex:1}
.fm .stat-card h4{margin:0 0 calc(6px * var(--kpi-card-scale, 0.9)) 0;font-size:calc(13px * var(--kpi-font-scale, var(--kpi-card-scale, 1)));color:#93c5fd}.fm .stat-card p{margin:0;font-size:calc(22px * var(--kpi-font-scale, var(--kpi-card-scale, 1)));font-weight:800}
.fm .table-section{background:transparent;overflow:auto;padding:15px}
.fm input[type="file"]{display:none!important}

/* ===== APPEND: Self-Operated fixes ===== */

/* =====================================================
   Self-Operated page fixes (KPI cards + top controls)
   Restores 0810-old behavior without touching .fm scope
   Appended: 2025-08-10
   ===================================================== */

/* --- Top upload/controls area --- */
.upload-section{background:var(--bg,#0b1220);color:#fff;padding:12px 16px;border-bottom:1px solid #1f2937}
.upload-top{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:10px}
.controls{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
.upload-btn{background:#00b488;color:#001;padding:8px 16px;border:0;border-radius:24px;font-size:14px;font-weight:700;cursor:pointer}
.btn{background:var(--blue,#2563eb);color:#fff;padding:8px 12px;border:0;border-radius:8px;cursor:pointer}
.sel,.date-filter,.num{color:#0b1220;background:#fff;padding:7px 8px;font-size:14px;border-radius:8px;border:1px solid #334155}
.notice{font-size:12px;color:var(--muted,#9ca3af)}

/* --- KPI grid & cards --- */
.kpi{display:grid;grid-template-columns:repeat(6,minmax(calc(160px * var(--kpi-card-scale, 0.9)),1fr));gap:calc(10px * var(--kpi-card-scale, 0.9));margin:calc(10px * var(--kpi-card-scale, 0.9)) calc(16px * var(--kpi-card-scale, 0.9))}
.card{background:var(--panel,#0f172a);color:#fff;padding:calc(12px * var(--kpi-card-scale, 0.9));border-radius:calc(12px * var(--kpi-card-scale, 0.9));min-width:calc(160px * var(--kpi-card-scale, 0.9));box-shadow:0 0 0 1px rgba(148,163,184,.12) inset}
.card h4{margin:0 0 calc(6px * var(--kpi-card-scale, 0.9));font-size:calc(13px * var(--kpi-font-scale, var(--kpi-card-scale, 1)));color:#93c5fd;font-weight:600}
.card p{margin:0;font-size:calc(18px * var(--kpi-font-scale, var(--kpi-card-scale, 1)));font-weight:800;letter-spacing:calc(.2px * var(--kpi-font-scale, var(--kpi-card-scale, 1)))}
.card .sub{margin-top:calc(4px * var(--kpi-card-scale, 0.9));font-size:calc(12px * var(--kpi-font-scale, var(--kpi-card-scale, 1)));color:#9ca3af}
.card .delta{margin-left:calc(6px * var(--kpi-card-scale, 0.9));font-size:calc(12px * var(--kpi-font-scale, var(--kpi-card-scale, 1)));font-weight:600}
.card .delta.up{color:#10b981}
.card .delta.down{color:#ef4444}

/* --- Tabs / Panel / Grid (used across self-operated pages) --- */
.tabs{display:flex;gap:12px;padding:10px 16px;border-bottom:1px solid #1f2937;background:var(--bg,#0b1220)}
.tab{padding:8px 12px;border-radius:8px;background:#111827;color:#9ca3af;cursor:pointer;user-select:none}
.tab.active{background:#1f2937;color:#fff;box-shadow:inset 0 -2px 0 0 var(--blue,#2563eb)}
.panel{background:var(--panel,#0f172a);border-radius:12px;padding:12px;margin:10px 16px}
.panel h3{margin:0 0 10px;font-weight:600;font-size:15px;color:#93c5fd}
.grid{display:grid;gap:16px}
.grid-2{grid-template-columns:1fr 1fr}

/* --- Hide native file input (self-operated also needs this) --- */
input[type="file"]{display:none !important}

/* --- Responsive adjustments for KPI grid --- */
@media (max-width:1280px){.kpi{grid-template-columns:repeat(4,minmax(calc(160px * var(--kpi-card-scale, 0.9)),1fr))}}
@media (max-width:1024px){.kpi{grid-template-columns:repeat(3,minmax(calc(160px * var(--kpi-card-scale, 0.9)),1fr))}}
@media (max-width:768px){.kpi{grid-template-columns:repeat(2,minmax(calc(160px * var(--kpi-card-scale, 0.9)),1fr))}}
@media (max-width:480px){.kpi{grid-template-columns:repeat(1,minmax(calc(160px * var(--kpi-card-scale, 0.9)),1fr))}}


/* ===== Light Main Area Overrides (2025-08-10) ===== */
body{background:var(--bg,#0b1220);}
.container{background:transparent;}
.main{background:#fff;color:#0b1220;}
.upload-section{background:#fff;color:#0b1220;border-bottom:1px solid #e5e7eb;}
.badge{background:#eef2ff;color:#1e40af;border:1px solid #c7d2fe;padding:2px 6px;border-radius:6px;font-weight:600;}
.sel,.date-filter,.num{background:#fff;color:#0b1220;border:1px solid #e5e7eb;}
.btn{background:#2563eb;color:#fff;}
.upload-btn{background:#10b981;color:#04210f;}
.notice{color:#6b7280;}

.panel{background:#fff;border:1px solid #e5e7eb;box-shadow:0 1px 2px rgba(16,24,40,.04);}
.stat-card{background:#fff;border:1px solid #e5e7eb;box-shadow:0 1px 2px rgba(16,24,40,.04);border-radius:calc(12px * var(--kpi-card-scale, 0.9));padding:calc(12px * var(--kpi-card-scale, 0.9));}
.stat-card h4{color:#334155;margin-bottom:calc(6px * var(--kpi-card-scale, 0.9));font-size:calc(13px * var(--kpi-font-scale, var(--kpi-card-scale, 1)));}
.stat-card p{color:#0b1220;font-size:calc(22px * var(--kpi-font-scale, var(--kpi-card-scale, 1)));}

.divider{background:#e5e7eb;}

/* DataTables light */
#report_wrapper{background:#fff;border:1px solid #e5e7eb;border-radius:12px;padding:8px}
table.dataTable{color:#0b1220;}
table.dataTable thead th{background:#f8fafc;color:#0b1220;border-bottom:1px solid #e5e7eb;}
table.dataTable thead th.sorting_asc, table.dataTable thead th.sorting_desc{background:#e5e7eb!important;color:#0b1220!important;}
table.dataTable tbody td{border-top:1px solid #f1f5f9;}
#report a,#report a:visited{color:#1d4ed8;}
#report a:hover{color:#1e40af;text-decoration:underline;}
/* remove dark first-column highlight */
#report.dataTable tbody td:first-child, .DTFC_Cloned tbody td{background:transparent!important;color:inherit!important;font-weight:inherit;border-color:inherit!important}
#report thead th:first-child{background:#f8fafc!important;color:#0b1220}

/* Tabs */
.tabs{background:#fff;border-bottom:1px solid #e5e7eb;}
.tab{background:#f1f5f9;color:#334155;}
.tab.active{background:#e5e7eb;color:#0b1220;box-shadow:none;}
