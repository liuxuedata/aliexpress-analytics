
/* =====================================================================
   Unified Light Theme (white content + dark sidebar)
   Drop-in replacement for assets/theme.css
   Works for: index.html (全托管) and self-operated.html (自运营)
   ===================================================================== */

/* ------ CSS Variables (Light) ------ */
:root{
  --bg: #f3f4f6;                   /* app background */
  --panel: #ffffff;                /* white panels */
  --panel-border: #e5e7eb;         /* light border */
  --brand: #1e40af;                /* deep brand blue */
  --blue: #2563eb;                 /* accent blue */
  --orange: #f97316;               /* accent orange */
  --text: #111827;                 /* primary text (very dark) */
  --muted: #6b7280;                /* muted gray text */
  --thead-bg: #f8fafc;             /* table head */
  --row-odd: #ffffff;              /* zebra row odd */
  --row-even: #f9fafb;             /* zebra row even */
  --row-hover: #eef2f7;            /* row hover */
  --shadow: 0 8px 24px rgba(16,24,40,.06);
}

*{ box-sizing:border-box }
html, body{ height:100% }
body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,Helvetica,"PingFang SC","Hiragino Sans GB","Microsoft YaHei",sans-serif;
}

/* ------ Top Navigation ------ */
.top-nav{background:var(--brand);color:#fff;position:sticky;top:0;z-index:2000;width:100%;}
.top-nav .nav-inner{max-width:1200px;margin:0 auto;display:flex;justify-content:space-between;align-items:center;padding:8px 16px;}
.top-nav .top-menu{list-style:none;margin:0;padding:0;display:flex;gap:20px;}
.top-nav .top-menu>li{position:relative;}
.top-nav .top-menu>li>a{color:#fff;text-decoration:none;padding:6px 10px;border-radius:6px;display:block;font-weight:700;}
.top-nav .top-menu>li>a:hover{background:rgba(255,255,255,0.1);}
.top-nav .dropdown{display:none;position:absolute;top:100%;left:0;background:#fff;color:#111;min-width:120px;border-radius:6px;box-shadow:0 2px 8px rgba(0,0,0,.15);z-index:2100;}
.top-nav .dropdown li{position:relative;}
.top-nav .dropdown a{color:#111;text-decoration:none;padding:6px 12px;display:block;}
.top-nav .dropdown a:hover{background:#f3f4f6;}
.top-nav .top-menu>li:hover>.dropdown{display:block;}
.top-nav .dropdown li:hover>ul{display:block;}
.top-nav .dropdown ul{display:none;position:absolute;top:0;left:100%;background:#fff;min-width:120px;border-radius:6px;box-shadow:0 2px 8px rgba(0,0,0,.15);z-index:2100;}
.top-nav .user-area{margin-left:0;}
.top-nav .user-area a{color:#fff;text-decoration:none;font-weight:700;}

/* ------ Sidebar ------ */
.sidebar{
  width:180px;
  background:#f1f5f9;
  color:#1e293b;
  padding:12px;
  height:calc(100vh - 50px);
  overflow:auto;
  border-right:1px solid #cbd5e1;
  position:sticky; top:50px; z-index:1000;
}
.sidebar h3{ margin:0 0 8px; font-size:16px }
.site-header{ display:flex; align-items:center; justify-content:space-between; margin-bottom:8px; }
.add-site-btn{ background:var(--brand); color:#fff; border:none; border-radius:4px; width:20px; height:20px; cursor:pointer; line-height:20px; text-align:center; }
.add-site-btn:hover{ background:#2563eb; }
.sidebar ul{ list-style:none; padding-left:0; margin:0 }
.sidebar li{ margin-bottom:6px }
.sidebar a{
  display:block; text-decoration:none;
  color:#475569; font-size:14px; padding:4px 6px; border-radius:6px;
}
.sidebar a:hover{ color:#1e293b; background:#e2e8f0 }
.sidebar .submenu{ list-style:none; padding-left:14px; display:none }
.sidebar .has-submenu>a{ cursor:pointer }
.sidebar .has-submenu.open .submenu{ display:block }
.sidebar .submenu a.active{ color:#1e293b; background:#cbd5e1 }
.sidebar .sub-nav{ list-style:none; padding-left:0; margin:0 }
.sidebar .sub-nav li{ margin-bottom:6px }
.sidebar .sub-nav a.active{ color:#1e293b; background:#cbd5e1 }

/* ------ Layout ------ */
.container{ display:flex; min-height:calc(100vh - 50px); max-width:1200px; margin:0 auto }
.main{
  flex:1; display:flex; flex-direction:column; gap:12px;
  padding:16px; background:#ffffff;
}

/* generic paddings + panels */
.content-pad{ padding:12px }
.panel{
  background:var(--panel);
  border:1px solid var(--panel-border);
  border-radius:12px;
  padding:12px;
  box-shadow: var(--shadow);
}
.controls{ display:flex; align-items:center; gap:8px }
/* upload section header */
.upload-top{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:10px}
.user-area{margin-left:auto}
.sel, select, input[type="text"]{
  padding:6px 8px; border:1px solid var(--panel-border);
  border-radius:8px; background:#fff; color:var(--text);
}
.upload-btn, .btn{
  padding:6px 12px; border-radius:8px; border:1px solid var(--panel-border);
  background:#fff; color:var(--text); cursor:pointer;
}
.upload-btn:hover, .btn:hover{ background:#f8fafc }

/* Divider */
.divider{ height:1px; background:var(--panel-border); margin:8px 0 12px }

/* ------ KPI Cards (index.html) ------ */
.stat-card{
  background:#fff; border:1px solid var(--panel-border);
  border-radius:14px; padding:12px 14px; box-shadow:var(--shadow);
}
.stat-card h4{ margin:0 0 6px; color:#334155; font-size:12px; letter-spacing:.2px }
.stat-card p{ margin:0; color:#0f172a; font-size:28px; font-weight:900; line-height:1.1 }
#kpi{ display:grid; grid-template-columns:repeat(auto-fit,minmax(210px,1fr)); gap:12px }

/* ------ Tables: DataTables High-Contrast Light ------ */
#report_wrapper{ background:#fff; border-radius:12px; padding:8px; border:1px solid var(--panel-border); box-shadow:var(--shadow) }

/* thead + fixed header */
table.dataTable thead th{
  background:var(--thead-bg) !important;
  color:var(--text) !important;
  border-bottom:1px solid var(--panel-border) !important;
  font-weight:800;
}
.fixedHeader-floating, .fixedHeader-floating th{
  background:var(--thead-bg) !important;
  color:var(--text) !important;
  border-bottom:1px solid var(--panel-border) !important;
}

/* body cells */
table.dataTable tbody td,
table.dataTable thead th{
  border-color:var(--panel-border) !important;
}
table.dataTable tbody td{
  color:var(--text) !important;
}

/* zebra + hover */
table.dataTable.stripe tbody tr:nth-child(odd){ background:var(--row-odd) !important }
table.dataTable.stripe tbody tr:nth-child(even){ background:var(--row-even) !important }
table.dataTable tbody tr:hover td{ background:var(--row-hover) !important }

/* links inside table */
#report a, #report a:visited{
  color:#1d4ed8; background:transparent; font-weight:700;
}
#report a:hover{ color:#1e3a8a; text-decoration:underline }

/* —— REMOVE first-column special background from old theme (fix asymmetry) —— */
#report.dataTable tbody td:first-child,
.DTFC_Cloned tbody td{
  background:transparent !important;
  color:var(--text) !important;
  border-color:var(--panel-border) !important;
  font-weight:700;
}
#report thead th:first-child{
  background:var(--thead-bg) !important;
  color:var(--text) !important;
  border-bottom:1px solid var(--panel-border) !important;
  font-weight:800 !important;
}
#report.dataTable tbody tr:hover td:first-child{ background:var(--row-hover) !important }

/* DataTables header buttons/sort state */
table.dataTable thead th.sorting_asc,
table.dataTable thead th.sorting_desc{
  background:var(--thead-bg) !important;
  color:#0f172a !important;
}

/* scroll shadows protection (optional) */
.dataTables_scrollBody{ border-top:1px solid var(--panel-border) }

/* Badges */
.badge{
  display:inline-flex; align-items:center; gap:6px;
  padding:4px 8px; font-size:12px; border-radius:999px;
  color:#0f172a; background:#e0e7ff;
}

/* Misc small improvements */
.small{ font-size:12px; color:var(--muted) }
.label{ color:#334155; font-weight:600 }


/* ====== Self-Operated KPI (always one line) ======
   Works with .kpi container and .card items used by self-operated.html
   Guaranteed single row via flex + horizontal scroll on narrow screens.
*/
.kpi{
  display:flex;
  gap:12px;
  padding:0 12px;
  margin:10px 0;
  overflow:auto;           /* allow horizontal scroll if viewport too narrow */
  -webkit-overflow-scrolling: touch;
}
.kpi::-webkit-scrollbar{ height:8px }
.kpi::-webkit-scrollbar-thumb{ background:#e5e7eb; border-radius:999px }

.kpi .card{
  background:#fff;
  border:1px solid var(--panel-border);
  border-radius:14px;
  padding:12px 14px;
  min-width:200px;         /* keep readable width */
  box-shadow: var(--shadow);
  flex:0 0 1;              /* fixed width cards for single-row layout */
}
.kpi .card h4{ margin:0 0 6px; color:#334155; font-size:12px; letter-spacing:.2px }
.kpi .card p{ margin:0; color:#0f172a; font-size:22px; font-weight:900; line-height:1.1 }
.kpi .card .sub{ margin-top:4px; font-size:12px; color:#6b7280 }
.kpi .card .delta{ margin-left:6px; font-size:12px; font-weight:700 }
.kpi .card .delta.up{ color:#10b981 }
.kpi .card .delta.down{ color:#ef4444 }

/* Optional: equal height cards */
.kpi .card{ display:flex; flex-direction:column; justify-content:center }


/* =============================
   0811B: KPI cards with light-gray background + visible segmented tabs
   ============================= */

/* New variable for KPI background */
:root{
  --kpi-bg: #f8fafc;           /* slightly darker than white */
  --kpi-border: #e5e7eb;
}

/* KPI: full-managed (#kpi .stat-card) */
#kpi .stat-card{
  background: var(--kpi-bg);
  border: 1px solid var(--kpi-border);
  box-shadow: var(--shadow);
}

/* KPI: self-operated (.kpi .card) */
.kpi .card{
  background: var(--kpi-bg);
  border: 1px solid var(--kpi-border);
  box-shadow: var(--shadow);
}

/* Segmented tabs for "明细表 / 运营分析" (works for various markup) */
.tabs, .tab-group, .segmented, .btn-group.tabs, .switch-group{
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 4px;
  background: #f3f4f6;
  border: 1px solid #e5e7eb;
  border-radius: 12px;
  box-shadow: var(--shadow);
}

.tabs .tab, .tab-group .tab, .segmented .tab,
.tabs button, .tab-group button, .segmented button, .btn-group.tabs .btn, .switch-group .btn{
  background: #fff;
  color: var(--text);
  border: 1px solid transparent;
  padding: 6px 12px;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 600;
}

.tabs .tab.active, .tab-group .tab.active, .segmented .tab.active,
.tabs button.active, .tab-group button.active, .segmented button.active,
.btn-group.tabs .btn.active, .switch-group .btn.active{
  background: var(--brand);
  color: #fff;
  border-color: var(--brand);
}

.tabs .tab:hover, .tab-group .tab:hover, .segmented .tab:hover,
.tabs button:hover, .tab-group button:hover, .segmented button:hover,
.btn-group.tabs .btn:hover, .switch-group .btn:hover{
  background:#f8fafc;
}

/* Ensure the group doesn't collapse */
.tabs:empty, .tab-group:empty, .segmented:empty, .btn-group.tabs:empty, .switch-group:empty{
  display:none;
}
