// 这是优化后的关键代码片段，需要替换到 public/independent-site.html 中

// 1. 优化的DataTables初始化部分（替换第2129-2144行）
    // 重新初始化DataTables - 添加错误处理
    try {
      dt = $('#report').DataTable({
        destroy: true,
        pageLength: 20,
        data: validatedData,
        scrollX: false,
        fixedHeader: true,
        autoWidth: true,
        processing: true,
        responsive: false,
        columns: columns,
        language: {
          emptyTable: "暂无数据",
          zeroRecords: "没有找到匹配的记录"
        },
        error: function(xhr, error, thrown) {
          console.error('DataTables初始化错误:', {
            xhr: xhr,
            error: error,
            thrown: thrown
          });
        }
      });
      console.log('DataTables重新初始化成功');
    } catch (error) {
      console.error('DataTables初始化失败:', error);
      // 显示错误信息给用户
      $table.html(`
        <thead>
          <tr>
            ${columns.map(col => `<th>${col.title}</th>`).join('')}
          </tr>
        </thead>
        <tbody>
          <tr>
            <td colspan="${columns.length}" style="text-align: center; color: red;">
              表格初始化失败: ${error.message}
            </td>
          </tr>
        </tbody>
      `);
    }

// 2. 在buildUnifiedTable函数开始处添加调试信息
  function buildUnifiedTable(data, currentChannel) {
    console.log('开始构建统一表格 - 优化版本');
    console.log('输入数据:', {
      dataLength: data.length,
      currentChannel: currentChannel,
      sampleData: data.slice(0, 2)
    });

// 3. 在获取列定义后添加调试信息
  const columns = getColumnsForChannel(currentChannel);
  console.log('列定义:', {
    columnsLength: columns.length,
    columnNames: columns.map(col => col.data)
  });

// 4. 优化Facebook Ads渠道调试信息
    if (currentChannel === 'facebook_ads') {
      // Facebook Ads 列：所有列都显示（已在列定义中处理）
      console.log('Facebook Ads渠道，显示所有列');
    } else {